"use strict";var Mn=Object.create;var ue=Object.defineProperty;var Xn=Object.getOwnPropertyDescriptor;var Wn=Object.getOwnPropertyNames;var Bn=Object.getPrototypeOf,Hn=Object.prototype.hasOwnProperty;var m=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),zn=(r,e)=>{for(var t in e)ue(r,t,{get:e[t],enumerable:!0})},mt=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Wn(e))!Hn.call(r,s)&&s!==t&&ue(r,s,{get:()=>e[s],enumerable:!(n=Xn(e,s))||n.enumerable});return r};var fe=(r,e,t)=>(t=r!=null?Mn(Bn(r)):{},mt(e||!r||!r.__esModule?ue(t,"default",{value:r,enumerable:!0}):t,r)),Kn=r=>mt(ue({},"__esModule",{value:!0}),r);var Y=m((Xa,$t)=>{var es="2.0.0",ts=Number.MAX_SAFE_INTEGER||9007199254740991,rs=16,ns=250,ss=["major","premajor","minor","preminor","patch","prepatch","prerelease"];$t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:rs,MAX_SAFE_BUILD_LENGTH:ns,MAX_SAFE_INTEGER:ts,RELEASE_TYPES:ss,SEMVER_SPEC_VERSION:es,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var J=m((Wa,Lt)=>{var is=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};Lt.exports=is});var F=m((b,At)=>{var{MAX_SAFE_COMPONENT_LENGTH:Me,MAX_SAFE_BUILD_LENGTH:os,MAX_LENGTH:as}=Y(),cs=J();b=At.exports={};var ls=b.re=[],us=b.safeRe=[],p=b.src=[],h=b.t={},fs=0,Xe="[a-zA-Z0-9-]",ps=[["\\s",1],["\\d",as],[Xe,os]],hs=r=>{for(let[e,t]of ps)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},E=(r,e,t)=>{let n=hs(e),s=fs++;cs(r,s,e),h[r]=s,p[s]=e,ls[s]=new RegExp(e,t?"g":void 0),us[s]=new RegExp(n,t?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Xe}*`);E("MAINVERSION",`(${p[h.NUMERICIDENTIFIER]})\\.(${p[h.NUMERICIDENTIFIER]})\\.(${p[h.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${p[h.NUMERICIDENTIFIERLOOSE]})\\.(${p[h.NUMERICIDENTIFIERLOOSE]})\\.(${p[h.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${p[h.NUMERICIDENTIFIER]}|${p[h.NONNUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${p[h.NUMERICIDENTIFIERLOOSE]}|${p[h.NONNUMERICIDENTIFIER]})`);E("PRERELEASE",`(?:-(${p[h.PRERELEASEIDENTIFIER]}(?:\\.${p[h.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${p[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[h.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${Xe}+`);E("BUILD",`(?:\\+(${p[h.BUILDIDENTIFIER]}(?:\\.${p[h.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${p[h.MAINVERSION]}${p[h.PRERELEASE]}?${p[h.BUILD]}?`);E("FULL",`^${p[h.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${p[h.MAINVERSIONLOOSE]}${p[h.PRERELEASELOOSE]}?${p[h.BUILD]}?`);E("LOOSE",`^${p[h.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${p[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${p[h.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${p[h.XRANGEIDENTIFIER]})(?:\\.(${p[h.XRANGEIDENTIFIER]})(?:\\.(${p[h.XRANGEIDENTIFIER]})(?:${p[h.PRERELEASE]})?${p[h.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${p[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[h.XRANGEIDENTIFIERLOOSE]})(?:${p[h.PRERELEASELOOSE]})?${p[h.BUILD]}?)?)?`);E("XRANGE",`^${p[h.GTLT]}\\s*${p[h.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${p[h.GTLT]}\\s*${p[h.XRANGEPLAINLOOSE]}$`);E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Me}})(?:\\.(\\d{1,${Me}}))?(?:\\.(\\d{1,${Me}}))?`);E("COERCE",`${p[h.COERCEPLAIN]}(?:$|[^\\d])`);E("COERCEFULL",p[h.COERCEPLAIN]+`(?:${p[h.PRERELEASE]})?(?:${p[h.BUILD]})?(?:$|[^\\d])`);E("COERCERTL",p[h.COERCE],!0);E("COERCERTLFULL",p[h.COERCEFULL],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${p[h.LONETILDE]}\\s+`,!0);b.tildeTrimReplace="$1~";E("TILDE",`^${p[h.LONETILDE]}${p[h.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${p[h.LONETILDE]}${p[h.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${p[h.LONECARET]}\\s+`,!0);b.caretTrimReplace="$1^";E("CARET",`^${p[h.LONECARET]}${p[h.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${p[h.LONECARET]}${p[h.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${p[h.GTLT]}\\s*(${p[h.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${p[h.GTLT]}\\s*(${p[h.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${p[h.GTLT]}\\s*(${p[h.LOOSEPLAIN]}|${p[h.XRANGEPLAIN]})`,!0);b.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${p[h.XRANGEPLAIN]})\\s+-\\s+(${p[h.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${p[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[h.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ee=m((Ba,Pt)=>{var ds=Object.freeze({loose:!0}),ms=Object.freeze({}),Es=r=>r?typeof r!="object"?ds:r:ms;Pt.exports=Es});var We=m((Ha,_t)=>{var qt=/^[0-9]+$/,kt=(r,e)=>{let t=qt.test(r),n=qt.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},gs=(r,e)=>kt(e,r);_t.exports={compareIdentifiers:kt,rcompareIdentifiers:gs}});var x=m((za,Vt)=>{var ge=J(),{MAX_LENGTH:Ut,MAX_SAFE_INTEGER:ye}=Y(),{safeRe:jt,t:Ft}=F(),ys=Ee(),{compareIdentifiers:V}=We(),Be=class r{constructor(e,t){if(t=ys(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Ut)throw new TypeError(`version is longer than ${Ut} characters`);ge("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?jt[Ft.LOOSE]:jt[Ft.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ye||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ye||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ye||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<ye)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ge("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),V(this.major,e.major)||V(this.minor,e.minor)||V(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(ge("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return V(n,s)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(ge("build compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return V(n,s)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),V(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Vt.exports=Be});var q=m((Ka,Mt)=>{var Gt=x(),xs=(r,e,t=!1)=>{if(r instanceof Gt)return r;try{return new Gt(r,e)}catch(n){if(!t)return null;throw n}};Mt.exports=xs});var Wt=m((Ya,Xt)=>{var Ts=q(),Ss=(r,e)=>{let t=Ts(r,e);return t?t.version:null};Xt.exports=Ss});var Ht=m((Ja,Bt)=>{var ws=q(),Rs=(r,e)=>{let t=ws(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Bt.exports=Rs});var Yt=m((Qa,Kt)=>{var zt=x(),Ns=(r,e,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new zt(r instanceof zt?r.version:r,t).inc(e,n,s).version}catch{return null}};Kt.exports=Ns});var Zt=m((Za,Qt)=>{var Jt=q(),vs=(r,e)=>{let t=Jt(r,null,!0),n=Jt(e,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let u=c?"pre":"";return t.major!==n.major?u+"major":t.minor!==n.minor?u+"minor":t.patch!==n.patch?u+"patch":"prerelease"};Qt.exports=vs});var tr=m((ec,er)=>{var Ds=x(),bs=(r,e)=>new Ds(r,e).major;er.exports=bs});var nr=m((tc,rr)=>{var Is=x(),Cs=(r,e)=>new Is(r,e).minor;rr.exports=Cs});var ir=m((rc,sr)=>{var Os=x(),$s=(r,e)=>new Os(r,e).patch;sr.exports=$s});var ar=m((nc,or)=>{var Ls=q(),As=(r,e)=>{let t=Ls(r,e);return t&&t.prerelease.length?t.prerelease:null};or.exports=As});var v=m((sc,lr)=>{var cr=x(),Ps=(r,e,t)=>new cr(r,t).compare(new cr(e,t));lr.exports=Ps});var fr=m((ic,ur)=>{var qs=v(),ks=(r,e,t)=>qs(e,r,t);ur.exports=ks});var hr=m((oc,pr)=>{var _s=v(),Us=(r,e)=>_s(r,e,!0);pr.exports=Us});var xe=m((ac,mr)=>{var dr=x(),js=(r,e,t)=>{let n=new dr(r,t),s=new dr(e,t);return n.compare(s)||n.compareBuild(s)};mr.exports=js});var gr=m((cc,Er)=>{var Fs=xe(),Vs=(r,e)=>r.sort((t,n)=>Fs(t,n,e));Er.exports=Vs});var xr=m((lc,yr)=>{var Gs=xe(),Ms=(r,e)=>r.sort((t,n)=>Gs(n,t,e));yr.exports=Ms});var Q=m((uc,Tr)=>{var Xs=v(),Ws=(r,e,t)=>Xs(r,e,t)>0;Tr.exports=Ws});var Te=m((fc,Sr)=>{var Bs=v(),Hs=(r,e,t)=>Bs(r,e,t)<0;Sr.exports=Hs});var He=m((pc,wr)=>{var zs=v(),Ks=(r,e,t)=>zs(r,e,t)===0;wr.exports=Ks});var ze=m((hc,Rr)=>{var Ys=v(),Js=(r,e,t)=>Ys(r,e,t)!==0;Rr.exports=Js});var Se=m((dc,Nr)=>{var Qs=v(),Zs=(r,e,t)=>Qs(r,e,t)>=0;Nr.exports=Zs});var we=m((mc,vr)=>{var ei=v(),ti=(r,e,t)=>ei(r,e,t)<=0;vr.exports=ti});var Ke=m((Ec,Dr)=>{var ri=He(),ni=ze(),si=Q(),ii=Se(),oi=Te(),ai=we(),ci=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return ri(r,t,n);case"!=":return ni(r,t,n);case">":return si(r,t,n);case">=":return ii(r,t,n);case"<":return oi(r,t,n);case"<=":return ai(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};Dr.exports=ci});var Ir=m((gc,br)=>{var li=x(),ui=q(),{safeRe:Re,t:Ne}=F(),fi=(r,e)=>{if(r instanceof li)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?Re[Ne.COERCEFULL]:Re[Ne.COERCE]);else{let c=e.includePrerelease?Re[Ne.COERCERTLFULL]:Re[Ne.COERCERTL],l;for(;(l=c.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||l.index+l[0].length!==t.index+t[0].length)&&(t=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(t===null)return null;let n=t[2],s=t[3]||"0",i=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return ui(`${n}.${s}.${i}${o}${a}`,e)};br.exports=fi});var Or=m((yc,Cr)=>{var Ye=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,t)}return this}};Cr.exports=Ye});var D=m((xc,Pr)=>{var Je=class r{constructor(e,t){if(t=hi(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof Qe)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!Lr(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&Ti(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&yi)|(this.options.loose&&xi))+":"+e,s=$r.get(n);if(s)return s;let i=this.options.loose,o=i?R[T.HYPHENRANGELOOSE]:R[T.HYPHENRANGE];e=e.replace(o,Oi(this.options.includePrerelease)),y("hyphen replace",e),e=e.replace(R[T.COMPARATORTRIM],mi),y("comparator trim",e),e=e.replace(R[T.TILDETRIM],Ei),y("tilde trim",e),e=e.replace(R[T.CARETTRIM],gi),y("caret trim",e);let a=e.split(" ").map(d=>Si(d,this.options)).join(" ").split(/\s+/).map(d=>Ci(d,this.options));i&&(a=a.filter(d=>(y("loose invalid filter",d,this.options),!!d.match(R[T.COMPARATORLOOSE])))),y("range list",a);let c=new Map,l=a.map(d=>new Qe(d,this.options));for(let d of l){if(Lr(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return $r.set(n,u),u}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>Ar(n,t)&&e.set.some(s=>Ar(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new di(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if($i(this.set[t],e,this.options))return!0;return!1}};Pr.exports=Je;var pi=Or(),$r=new pi,hi=Ee(),Qe=Z(),y=J(),di=x(),{safeRe:R,t:T,comparatorTrimReplace:mi,tildeTrimReplace:Ei,caretTrimReplace:gi}=F(),{FLAG_INCLUDE_PRERELEASE:yi,FLAG_LOOSE:xi}=Y(),Lr=r=>r.value==="<0.0.0-0",Ti=r=>r.value==="",Ar=(r,e)=>{let t=!0,n=r.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,e)),s=n.pop();return t},Si=(r,e)=>(y("comp",r,e),r=Ni(r,e),y("caret",r),r=wi(r,e),y("tildes",r),r=Di(r,e),y("xrange",r),r=Ii(r,e),y("stars",r),r),S=r=>!r||r.toLowerCase()==="x"||r==="*",wi=(r,e)=>r.trim().split(/\s+/).map(t=>Ri(t,e)).join(" "),Ri=(r,e)=>{let t=e.loose?R[T.TILDELOOSE]:R[T.TILDE];return r.replace(t,(n,s,i,o,a)=>{y("tilde",r,n,s,i,o,a);let c;return S(s)?c="":S(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:S(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(y("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,y("tilde return",c),c})},Ni=(r,e)=>r.trim().split(/\s+/).map(t=>vi(t,e)).join(" "),vi=(r,e)=>{y("caret",r,e);let t=e.loose?R[T.CARETLOOSE]:R[T.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(s,i,o,a,c)=>{y("caret",r,s,i,o,a,c);let l;return S(i)?l="":S(o)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:S(a)?i==="0"?l=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(y("replaceCaret pr",c),i==="0"?o==="0"?l=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(y("no pr"),i==="0"?o==="0"?l=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),y("caret return",l),l})},Di=(r,e)=>(y("replaceXRanges",r,e),r.split(/\s+/).map(t=>bi(t,e)).join(" ")),bi=(r,e)=>{r=r.trim();let t=e.loose?R[T.XRANGELOOSE]:R[T.XRANGE];return r.replace(t,(n,s,i,o,a,c)=>{y("xRange",r,n,s,i,o,a,c);let l=S(i),u=l||S(o),d=u||S(a),g=d;return s==="="&&g&&(s=""),c=e.includePrerelease?"-0":"",l?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&g?(u&&(o=0),a=0,s===">"?(s=">=",u?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",u?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),y("xRange return",n),n})},Ii=(r,e)=>(y("replaceStars",r,e),r.trim().replace(R[T.STAR],"")),Ci=(r,e)=>(y("replaceGTE0",r,e),r.trim().replace(R[e.includePrerelease?T.GTE0PRE:T.GTE0],"")),Oi=r=>(e,t,n,s,i,o,a,c,l,u,d,g)=>(S(n)?t="":S(s)?t=`>=${n}.0.0${r?"-0":""}`:S(i)?t=`>=${n}.${s}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,S(l)?c="":S(u)?c=`<${+l+1}.0.0-0`:S(d)?c=`<${l}.${+u+1}.0-0`:g?c=`<=${l}.${u}.${d}-${g}`:r?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),$i=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(y(r[n].semver),r[n].semver!==Qe.ANY&&r[n].semver.prerelease.length>0){let s=r[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var Z=m((Tc,Fr)=>{var ee=Symbol("SemVer ANY"),tt=class r{static get ANY(){return ee}constructor(e,t){if(t=qr(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),et("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ee?this.value="":this.value=this.operator+this.semver.version,et("comp",this)}parse(e){let t=this.options.loose?kr[_r.COMPARATORLOOSE]:kr[_r.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Ur(n[2],this.options.loose):this.semver=ee}toString(){return this.value}test(e){if(et("Comparator.test",e,this.options.loose),this.semver===ee||e===ee)return!0;if(typeof e=="string")try{e=new Ur(e,this.options)}catch{return!1}return Ze(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new jr(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new jr(this.value,t).test(e.semver):(t=qr(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Ze(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Ze(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Fr.exports=tt;var qr=Ee(),{safeRe:kr,t:_r}=F(),Ze=Ke(),et=J(),Ur=x(),jr=D()});var te=m((Sc,Vr)=>{var Li=D(),Ai=(r,e,t)=>{try{e=new Li(e,t)}catch{return!1}return e.test(r)};Vr.exports=Ai});var Mr=m((wc,Gr)=>{var Pi=D(),qi=(r,e)=>new Pi(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Gr.exports=qi});var Wr=m((Rc,Xr)=>{var ki=x(),_i=D(),Ui=(r,e,t)=>{let n=null,s=null,i=null;try{i=new _i(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new ki(n,t))}),n};Xr.exports=Ui});var Hr=m((Nc,Br)=>{var ji=x(),Fi=D(),Vi=(r,e,t)=>{let n=null,s=null,i=null;try{i=new Fi(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new ji(n,t))}),n};Br.exports=Vi});var Yr=m((vc,Kr)=>{var rt=x(),Gi=D(),zr=Q(),Mi=(r,e)=>{r=new Gi(r,e);let t=new rt("0.0.0");if(r.test(t)||(t=new rt("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let s=r.set[n],i=null;s.forEach(o=>{let a=new rt(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||zr(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||zr(t,i))&&(t=i)}return t&&r.test(t)?t:null};Kr.exports=Mi});var Qr=m((Dc,Jr)=>{var Xi=D(),Wi=(r,e)=>{try{return new Xi(r,e).range||"*"}catch{return null}};Jr.exports=Wi});var ve=m((bc,rn)=>{var Bi=x(),tn=Z(),{ANY:Hi}=tn,zi=D(),Ki=te(),Zr=Q(),en=Te(),Yi=we(),Ji=Se(),Qi=(r,e,t,n)=>{r=new Bi(r,n),e=new zi(e,n);let s,i,o,a,c;switch(t){case">":s=Zr,i=Yi,o=en,a=">",c=">=";break;case"<":s=en,i=Ji,o=Zr,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ki(r,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,g=null;if(u.forEach(f=>{f.semver===Hi&&(f=new tn(">=0.0.0")),d=d||f,g=g||f,s(f.semver,d.semver,n)?d=f:o(f.semver,g.semver,n)&&(g=f)}),d.operator===a||d.operator===c||(!g.operator||g.operator===a)&&i(r,g.semver))return!1;if(g.operator===c&&o(r,g.semver))return!1}return!0};rn.exports=Qi});var sn=m((Ic,nn)=>{var Zi=ve(),eo=(r,e,t)=>Zi(r,e,">",t);nn.exports=eo});var an=m((Cc,on)=>{var to=ve(),ro=(r,e,t)=>to(r,e,"<",t);on.exports=ro});var un=m((Oc,ln)=>{var cn=D(),no=(r,e,t)=>(r=new cn(r,t),e=new cn(e,t),r.intersects(e,t));ln.exports=no});var pn=m(($c,fn)=>{var so=te(),io=v();fn.exports=(r,e,t)=>{let n=[],s=null,i=null,o=r.sort((u,d)=>io(u,d,t));for(let u of o)so(u,e,t)?(i=u,s||(s=u)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var yn=m((Lc,gn)=>{var hn=D(),st=Z(),{ANY:nt}=st,re=te(),it=v(),oo=(r,e,t={})=>{if(r===e)return!0;r=new hn(r,t),e=new hn(e,t);let n=!1;e:for(let s of r.set){for(let i of e.set){let o=co(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},ao=[new st(">=0.0.0-0")],dn=[new st(">=0.0.0")],co=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===nt){if(e.length===1&&e[0].semver===nt)return!0;t.includePrerelease?r=ao:r=dn}if(e.length===1&&e[0].semver===nt){if(t.includePrerelease)return!0;e=dn}let n=new Set,s,i;for(let f of r)f.operator===">"||f.operator===">="?s=mn(s,f,t):f.operator==="<"||f.operator==="<="?i=En(i,f,t):n.add(f.semver);if(n.size>1)return null;let o;if(s&&i){if(o=it(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let f of n){if(s&&!re(f,String(s),t)||i&&!re(f,String(i),t))return null;for(let ke of e)if(!re(f,String(ke),t))return!1;return!0}let a,c,l,u,d=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,g=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",l=l||f.operator==="<"||f.operator==="<=",s){if(g&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===g.major&&f.semver.minor===g.minor&&f.semver.patch===g.patch&&(g=!1),f.operator===">"||f.operator===">="){if(a=mn(s,f,t),a===f&&a!==s)return!1}else if(s.operator===">="&&!re(s.semver,String(f),t))return!1}if(i){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(c=En(i,f,t),c===f&&c!==i)return!1}else if(i.operator==="<="&&!re(i.semver,String(f),t))return!1}if(!f.operator&&(i||s)&&o!==0)return!1}return!(s&&l&&!i&&o!==0||i&&u&&!s&&o!==0||g||d)},mn=(r,e,t)=>{if(!r)return e;let n=it(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},En=(r,e,t)=>{if(!r)return e;let n=it(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};gn.exports=oo});var ne=m((Ac,Sn)=>{var ot=F(),xn=Y(),lo=x(),Tn=We(),uo=q(),fo=Wt(),po=Ht(),ho=Yt(),mo=Zt(),Eo=tr(),go=nr(),yo=ir(),xo=ar(),To=v(),So=fr(),wo=hr(),Ro=xe(),No=gr(),vo=xr(),Do=Q(),bo=Te(),Io=He(),Co=ze(),Oo=Se(),$o=we(),Lo=Ke(),Ao=Ir(),Po=Z(),qo=D(),ko=te(),_o=Mr(),Uo=Wr(),jo=Hr(),Fo=Yr(),Vo=Qr(),Go=ve(),Mo=sn(),Xo=an(),Wo=un(),Bo=pn(),Ho=yn();Sn.exports={parse:uo,valid:fo,clean:po,inc:ho,diff:mo,major:Eo,minor:go,patch:yo,prerelease:xo,compare:To,rcompare:So,compareLoose:wo,compareBuild:Ro,sort:No,rsort:vo,gt:Do,lt:bo,eq:Io,neq:Co,gte:Oo,lte:$o,cmp:Lo,coerce:Ao,Comparator:Po,Range:qo,satisfies:ko,toComparators:_o,maxSatisfying:Uo,minSatisfying:jo,minVersion:Fo,validRange:Vo,outside:Go,gtr:Mo,ltr:Xo,intersects:Wo,simplifyRange:Bo,subset:Ho,SemVer:lo,re:ot.re,src:ot.src,tokens:ot.t,SEMVER_SPEC_VERSION:xn.SEMVER_SPEC_VERSION,RELEASE_TYPES:xn.RELEASE_TYPES,compareIdentifiers:Tn.compareIdentifiers,rcompareIdentifiers:Tn.rcompareIdentifiers}});var aa={};zn(aa,{activate:()=>ia,deactivate:()=>oa});module.exports=Kn(aa);var P=require("vscode");function _(r){return'"'+r+'"'}function Et(r){return r===void 0?!0:typeof r=="string"||Array.isArray(r)?r.length===0:typeof r=="object"&&r!==null?Object.keys(r).length===0:!1}var _e="abcdefghijklmnopqrstuvwxyz";function U(r){if(r<0||!Number.isInteger(r))throw new Error("Input must be a non-negative integer.");let e=Math.floor(r/_e.length),t=_e[r%_e.length];return"z".repeat(e)+t}var gt=require("child_process");function yt(r){return new Promise((e,t)=>{let n=(0,gt.exec)(r),s="",i="";n.stdout?.on("data",o=>{s+=o}),n.stderr?.on("data",o=>{i+=o}),n.on("exit",o=>{o===0?e(s):t(new Error(i))}),n.on("close",o=>{o===0?e(s):t(new Error(i||"Unknown error"))}),n.on("error",o=>{console.error("Failed to start subprocess:",o),t(o)})})}var B=class extends Error{constructor(e,t,n){let s=e.status||e.status===0?e.status:"",i=e.statusText||"",o=`${s} ${i}`.trim(),a=o?`status code ${o}`:"an unknown error";super(`Request failed with ${a}: ${t.method} ${t.url}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=e,this.request=t,this.options=n}};var j=class extends Error{constructor(e){super(`Request timed out: ${e.method} ${e.url}`),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=e}};var H=r=>r!==null&&typeof r=="object";var z=(...r)=>{for(let e of r)if((!H(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return pe({},...r)},Ue=(r={},e={})=>{let t=new globalThis.Headers(r),n=e instanceof globalThis.Headers,s=new globalThis.Headers(e);for(let[i,o]of s.entries())n&&o==="undefined"||o===void 0?t.delete(i):t.set(i,o);return t},pe=(...r)=>{let e={},t={};for(let n of r)if(Array.isArray(n))Array.isArray(e)||(e=[]),e=[...e,...n];else if(H(n)){for(let[s,i]of Object.entries(n))H(i)&&s in e&&(i=pe(e[s],i)),e={...e,[s]:i};H(n.headers)&&(t=Ue(t,n.headers),e.headers=t)}return e};var xt=(()=>{let r=!1,e=!1,t=typeof globalThis.ReadableStream=="function",n=typeof globalThis.Request=="function";if(t&&n)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type")}catch(s){if(s instanceof Error&&s.message==="unsupported BodyInit type")return!1;throw s}return r&&!e})(),Tt=typeof globalThis.AbortController=="function",St=typeof globalThis.ReadableStream=="function",wt=typeof globalThis.FormData=="function",he=["get","post","put","patch","head","delete"],Yn=()=>{};Yn();var Rt={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},de=2147483647,me=Symbol("stop"),Nt={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},vt={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0};var bt=r=>he.includes(r)?r.toUpperCase():r,Jn=["get","put","head","delete","options","trace"],Qn=[408,413,429,500,502,503,504],It=[413,429,503],Dt={limit:2,methods:Jn,statusCodes:Qn,afterStatusCodes:It,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:r=>.3*2**(r-1)*1e3},Ct=(r={})=>{if(typeof r=="number")return{...Dt,limit:r};if(r.methods&&!Array.isArray(r.methods))throw new Error("retry.methods must be an array");if(r.statusCodes&&!Array.isArray(r.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Dt,...r,afterStatusCodes:It}};async function je(r,e,t,n){return new Promise((s,i)=>{let o=setTimeout(()=>{t&&t.abort(),i(new j(r))},n.timeout);n.fetch(r,e).then(s).catch(i).then(()=>{clearTimeout(o)})})}async function Fe(r,{signal:e}){return new Promise((t,n)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",s,{once:!0}));function s(){clearTimeout(i),n(e.reason)}let i=setTimeout(()=>{e?.removeEventListener("abort",s),t()},r)})}var Ot=(r,e)=>{let t={};for(let n in e)!(n in vt)&&!(n in Nt)&&!(n in r)&&(t[n]=e[n]);return t};var K=class r{static create(e,t){let n=new r(e,t),s=async()=>{if(typeof n._options.timeout=="number"&&n._options.timeout>de)throw new RangeError(`The \`timeout\` option cannot be greater than ${de}`);await Promise.resolve();let a=await n._fetch();for(let c of n._options.hooks.afterResponse){let l=await c(n.request,n._options,n._decorateResponse(a.clone()));l instanceof globalThis.Response&&(a=l)}if(n._decorateResponse(a),!a.ok&&n._options.throwHttpErrors){let c=new B(a,n.request,n._options);for(let l of n._options.hooks.beforeError)c=await l(c);throw c}if(n._options.onDownloadProgress){if(typeof n._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!St)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return n._stream(a.clone(),n._options.onDownloadProgress)}return a},o=n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(s):s();for(let[a,c]of Object.entries(Rt))o[a]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||c);let u=(await o).clone();if(a==="json"){if(u.status===204||(await u.clone().arrayBuffer()).byteLength===0)return"";if(t.parseJson)return t.parseJson(await u.text())}return u[a]()};return o}constructor(e,t={}){Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e;let n=this._input instanceof Request&&"credentials"in Request.prototype?this._input.credentials:void 0;if(this._options={...n&&{credentials:n},...t,headers:Ue(this._input.headers,t.headers),hooks:pe({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:bt(t.method??this._input.method),prefixUrl:String(t.prefixUrl||""),retry:Ct(t.retry),throwHttpErrors:t.throwHttpErrors!==!1,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Tt){if(this.abortController=new globalThis.AbortController,this._options.signal){let s=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(s.reason)})}this._options.signal=this.abortController.signal}if(xt&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){let i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),o=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(wt&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(o,{...this.request}),this._options)}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<=this._options.retry.limit&&!(e instanceof j)){if(e instanceof B){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;let n=e.response.headers.get("Retry-After");if(n&&this._options.retry.afterStatusCodes.includes(e.response.status)){let s=Number(n)*1e3;Number.isNaN(s)&&(s=Date.parse(n)-Date.now());let i=this._options.retry.maxRetryAfter??s;return s<i?s:i}if(e.response.status===413)return 0}let t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){let n=Math.min(this._calculateRetryDelay(t),de);if(n!==0&&this._retryCount>0){await Fe(n,{signal:this._options.signal});for(let s of this._options.hooks.beforeRetry)if(await s({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===me)return;return this._retry(e)}throw t}}async _fetch(){for(let n of this._options.hooks.beforeRequest){let s=await n(this.request,this._options);if(s instanceof Request){this.request=s;break}if(s instanceof Response)return s}let e=Ot(this.request,this._options),t=this.request;return this.request=t.clone(),this._options.timeout===!1?this._options.fetch(t,e):je(t,e,this.abortController,this._options)}_stream(e,t){let n=Number(e.headers.get("content-length"))||0,s=0;return e.status===204?(t&&t({percent:1,totalBytes:n,transferredBytes:s},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(i){let o=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array);async function a(){let{done:c,value:l}=await o.read();if(c){i.close();return}if(t){s+=l.byteLength;let u=n===0?0:s/n;t({percent:u,transferredBytes:s,totalBytes:n},l)}i.enqueue(l),await a()}await a()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}};var Ve=r=>{let e=(t,n)=>K.create(t,z(r,n));for(let t of he)e[t]=(n,s)=>K.create(n,z(r,s,{method:t}));return e.create=t=>Ve(z(t)),e.extend=t=>Ve(z(r,t)),e.stop=me,e},Zn=Ve(),Ge=Zn;var se=fe(ne()),zo="https://index.crates.io";async function at(r,e=zo){let t=r.replace(/"/g,"").toLocaleLowerCase(),n="";t.length<=2?n=t.length.toString():t.length===3?n="3/"+t.substring(0,1):n=t.substring(0,2)+"/"+t.substring(2,4);let s=await Ge.get(`${e}/${n}/${t}`);if(s.status!==200)throw new Error(`get crates metadata error: statusCode=${s.status} ${await s.text()}`);let i=(await s.text()).split(`
`).filter(g=>g),o=[],a={},c={},l=[],u=null,d=null;for(let g=i.length-1;g>=0;g--){let f=JSON.parse(i[g]);if(f.yanked===!1){o.push(f.vers),u===null&&(0,se.prerelease)(f.vers)===null?u=f.vers:d===null&&(0,se.prerelease)(f.vers)!==null&&(d=f.vers),f.rust_version&&(c[f.vers]=f.rust_version);let ke=Object.keys(f.features).filter(W=>W==="default"?(l=f.features.default,!1):!0),dt=[];f.features2&&(dt=Object.keys(f.features2)),a[f.vers]=[...ke,...dt];for(let W of f.deps)W.optional&&(0,se.satisfies)(f.vers,W.req)&&a[f.vers].push(W.name)}}return{name:r,versions:o,features:a,defaultFeatures:l,rustVersion:c,createdAt:new Date().getUTCMilliseconds(),latestStable:u,latestPrerelease:d}}async function ct(r){if(r==="")return[];let e=await Ge.get("https://crates.io/api/v1/crates?page=1&per_page=30&q="+r,{headers:{"User-Agent":"VSCodeExtension/crates-cmp"}});if(e.status!==200)throw new Error(`search crate error: statusCode=${e.status} ${await e.text()}`);return(await e.json()).crates}async function I(r,e,t=!1){let n=Ko(e);if(t){let i=await at(e);return r.globalState.update(n,i),i}let s=r.globalState.get(n);if(!s||s.createdAt>new Date().getUTCMilliseconds()-1e3*60*10){let i=await at(e);return r.globalState.update(n,i),i}return s}function Ko(r){return`crates-cmp:metadata:${r}`}async function wn(r,e){return(await I(r,e)).versions}var ie=Symbol("None"),oe=class r{val;constructor(e){this.val=e}get[Symbol.toStringTag](){return"Option"}*[Symbol.iterator](){this.isSome()&&(yield this.val)}isSome(){return this.val!==ie}isNone(){return this.val===ie}expect(e){if(this.isNone())throw new Error(e);return this.val}unwrap(){if(this.isNone())throw new Error("Unwrap called on None");return this.val}unwrapOr(e){return this.isNone()?e:this.val}unwrapOrElse(e){return this.isNone()?e():this.val}map(e){return this.isSome()?new r(e(this.val)):this}mapOr(e,t){return this.isSome()?t(this.val):e}or(e){return this.isSome()?this:e}okOr(e){return this.isSome()?G(this.val):M(e)}peek(){return this.val}flatten(){return this.val instanceof r?this.val:this}static from(e){let t=e();return t==null?new r(ie):new r(t)}static async fromAsync(e){let t=await e();return t==null?new r(ie):new r(t)}};function De(r){return new oe(r)}Object.defineProperty(De,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isSome()||!1});function be(){return new oe(ie)}Object.defineProperty(be,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isNone()||!1});var X=class r{val;constructor(e){this.val=e}get[Symbol.toStringTag](){return"Result"}*[Symbol.iterator](){this.isOk()&&(yield this.val)}isOk(){return!(this.val instanceof Error||this.val&&typeof this.val=="object"&&Error.isPrototypeOf(this.val))}isErr(){return this.val instanceof Error||this.val&&typeof this.val=="object"&&Error.isPrototypeOf(this.val)}formatError(e){throw e.stack=`${e.message}: ${this.val.stack?`
	`+this.val.stack.split(`
`).join(`
	`):this.val.message}`,e}expect(e){return this.isErr()&&this.formatError(new Error(e)),this.val}expectErr(e){return this.isOk()&&this.formatError(new Error(e)),this.val}unwrap(){return this.isErr()&&this.formatError(new Error(`Unwrap called on ${this.val.name}`)),this.val}unwrapErr(){if(this.isOk())throw new Error(`UnwrapError called on value - ${this.val}`);return this.val}unwrapOr(e){return this.isErr()?e:this.val}unwrapOrElse(e){return this.isErr()?e(this.val):this.val}map(e){return this.isOk()?new r(e(this.val)):this}mapErr(e){return this.isOk()?this:new r(e(this.val))}mapOr(e,t){return this.isOk()?t(this.val):e}or(e){return this.isOk()?this:e}ok(){return this.isOk()?De(this.val):be()}peek(){return this.val}throw(){if(this.isErr())throw this.val}flatten(){return this.val instanceof r?this.val:this}static from(e){try{return new r(e())}catch(t){return new r(t)}}static async fromAsync(e){try{return new r(await e())}catch(t){return new r(t)}}static partition(e){return e.reduce((t,n)=>(n.isOk()?t.ok.push(n.unwrap()):t.err.push(n.unwrapErr()),t),{ok:[],err:[]})}};function G(r){return new X(r)}Object.defineProperty(G,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isOk()||!1});function M(r){return typeof r=="string"?new X(new Error(r)):new X(r)}Object.defineProperty(M,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isErr()||!1});async function N(r){try{let e=await r;return G(e)}catch(e){return M(e)}}var Rn=fe(ne());async function Nn(r,e,t,n){if(e==="")return[];let s=await N(I(r,e));if(s.isErr())throw s.unwrapErr();let i=s.unwrap();if(t==="")return i.features[i.latestStable]??[];let o=Yo(i,t);if(o.length===0)return[];if(n&&n.length!==0){let a={};for(let c of n)a[c]=!0;return o.filter(c=>!a[c])}return o}function Yo(r,e){let t=r.features[e]??[];if(t.length===0){for(let n of r.versions)if((0,Rn.satisfies)(n,e)){t=r.features[n]??[];break}}return t}var C=fe(ne());function vn(r,e){if(e.length===0)return[];let t=[];for(let n of e)t.push(Qo(r,n));return t}async function Qo(r,e){let t=await I(r.extensionContext,e.name);t[e.inputVersion]||(t=await I(r.extensionContext,e.name,!0));let n={id:e.id,current:e.currentVersion,latest:"",status:"Unkown"};if(!n.current)return n.status="Not Installed",{ctx:r,decoration:n};if((0,C.prerelease)(n.current)===null){if(e.currentVersion!==t.latestStable){if(n.status="Outdated",n.latest=t.latestStable,(0,C.major)(n.current)===(0,C.major)(t.latestStable))return{ctx:r,decoration:n};for(let s of t.versions)if((0,C.satisfies)(s,n.current))return n.currentMax=s,{ctx:r,decoration:n}}return n.status="Latest",n.latest=t.latestStable,{ctx:r,decoration:n}}if(e.currentVersion!==t.latestPrerelease){if(n.status="Outdated",n.latest=t.latestPrerelease,(0,C.satisfies)(t.latestPrerelease,n.current))return{ctx:r,decoration:n};for(let s of t.versions)if((0,C.satisfies)(s,n.current))return n.currentMax=s,{ctx:r,decoration:n};return{ctx:r,decoration:n}}return n.status="Latest",n.latest=t.latestPrerelease,{ctx:r,decoration:n}}async function Dn(r){return ct(r)}var bn=fe(ne()),lt=require("vscode");async function In(r,e){if(e.length===0)return[];let t=[];for await(let n of e){let s=await I(r.extensionContext,n.name,!0),i;for(let o of s.versions)if((0,bn.satisfies)(o,n.inputVersion)){i=o;break}if(i||t.push({ctx:r,diagnostic:{id:n.id,type:"Version",severity:lt.DiagnosticSeverity.Error,source:"extension/crates-cmp",message:"Version not found, latest stable is "+s.latestStable}}),i&&n.features.length!==0)for(let o of n.features)s.features[i].includes(o)||t.push({ctx:r,diagnostic:{id:n.id,type:"Feature",severity:lt.DiagnosticSeverity.Error,source:"extension/crates-cmp",message:`Feature "${o}" not found, available features are `+s.features[i].join(", ")}})}return t}var L=require("vscode");async function ut(r,e,t){let n=await N(wn(r,e));if(n.isErr())return L.window.showErrorMessage(n.unwrapErr().message),[];let s=n.unwrap().map((i,o)=>{let a=new L.CompletionItem(_(i),L.CompletionItemKind.Constant);return a.insertText=_(i),a.sortText=U(o++),a.preselect=o===0,a.range=t,a});return new L.CompletionList(s)}var A=require("vscode");async function Cn(r,e,t,n,s){let i=await N(Nn(r,e,t,n));if(i.isErr())return A.window.showErrorMessage(i.unwrapErr().message),[];let o=i.unwrap().map((a,c)=>{let l=new A.CompletionItem(_(a),A.CompletionItemKind.Constant);return l.insertText=_(a),l.sortText=U(c++),l.preselect=c===0,l.range=s,l});return new A.CompletionList(o)}var O=require("vscode");async function On(r,e){let t=ea(r,e),n=await N(Dn(t));if(n.isErr())return O.window.showErrorMessage(n.unwrapErr().message),[];let[s,i]=ta(t);return n.unwrap().map((a,c)=>{let l=new O.CompletionItem(a.name,O.CompletionItemKind.Constant);return l.insertText=a.name,l.documentation=a.description,l.detail="max version: "+a.max_version,l.sortText=U(c++),l.preselect=c===0,l.range=new O.Range(e.line,s,e.line,i),l})}function ea(r,e){let t=new O.Range(e.line,0,e.line,e.character);return r.getText(t)}function ta(r){let e=-1,t=-1;for(let n=0;n<r.length;n++)r[n].trim()!==""&&(e===-1&&(e=n),t=n);return[e,t]}var $n=require("vscode");function Ln(r,e){return new Promise((t,n)=>{$n.commands.executeCommand(r,e).then(s=>{Et(s)&&n("symbol provider unavailable"),t(s)},s=>n(s))})}var qn=require("vscode");var An=require("vscode");function $(r){return r&&new An.Range(r.start.translate(0,1),r.end.translate(0,-1))}function Pn(r){return new Promise(e=>setTimeout(e,r))}var ft=class{enterTable(e,t){return!0}enterDependencies(e,t){return!0}onPackage(e,t){}onDependencies(e,t,n,s){}onFeatures(e,t){}onWorkspace(e,t){}onLib(e,t){}onBin(e,t){}onProfile(e,t){}onBadges(e,t){}onOther(e,t){}tree;rev;constructor(e,t){this.tree=e,this.rev=t}getRev(){return this.rev}walk(){for(let e of this.tree)switch(e.name){case"package":this.enterTable(e,"package")&&this.onPackage(e.name,e);break;case"dependencies":this.enterDependencies(e,"dependencies")&&this.onDependencies(e.name,e,"dependencies");break;case"dev-dependencies":this.enterDependencies(e,"dev-dependencies")&&this.onDependencies(e.name,e,"dev-dependencies");break;case"build-dependencies":this.enterDependencies(e,"build-dependencies")&&this.onDependencies(e.name,e,"build-dependencies");break;case"target":if(this.enterDependencies(e,"dependencies"))for(let t of e.children)for(let n of t.children)this.onDependencies(ae(e.name,t.name,n.name),n,"dependencies",t.name);case"features":this.enterTable(e,"features")&&this.onFeatures(e.name,e);break;case"workspace":this.enterTable(e,"workspace")&&this.onWorkspace(e.name,e);break;case"lib":this.enterTable(e,"lib")&&this.onLib(e.name,e);break;case"bin":this.enterTable(e,"bin")&&this.onBin(e.name,e);break;case"profile":this.enterTable(e,"profile")&&this.onProfile(e.name,e);break;case"badges":this.enterTable(e,"badges")&&this.onBadges(e.name,e);break;default:this.enterTable(e,"other")&&this.onOther(e.name,e);break}}},ce=class extends ft{enterCrate(e){return!0}onCrate(e,t,n,s){}onDependencies(e,t,n,s){for(let i of t.children)this.enterCrate(i)&&this.onCrate(ae(e,i.name),i,n,s)}};async function Oe(r){for(let e=0;e<5;e++){let t=await N(Ln("vscode.executeDocumentSymbolProvider",r));if(console.log("waiting for Even better toml"),t.isOk())return t.unwrap();await Pn(500)}return qn.window.showErrorMessage("Require `Even Better TOML` extension"),[]}var Ie=class extends ce{nodeStore;identifiers=[];doc;constructor(e,t,n,s){super(e,s),this.doc=t,this.nodeStore=n}enterTable(e,t){return!1}enterDependencies(e,t){return!0}enterCrate(e){return!0}onCrate(e,t,n,s){let i=t.name,o={id:e,name:i,inputVersion:"",features:[],tableName:n,platform:s};if(this.identifiers.push(o.id),this.nodeStore.set(o.id,{value:this.doc.getText(t.range),table:n,range:t.range,denpendencyType:"Crate"},this.getRev()),this.nodeStore.setNode(o.id,{value:this.doc.getText(t.range),table:n,range:t.range,denpendencyType:"Crate"}),t.children.length===0){let a=this.doc.getText($(t.range));o.inputVersion=a,this.nodeStore.dependencies.push(o);return}for(let a of t.children){if(a.name==="version"){let c=this.doc.getText($(a.range));o.inputVersion=c,this.nodeStore.setNode(ae(o.id,a.name),{value:c,range:a.range,table:n,denpendencyType:"Version"});continue}if(a.name==="features"){if(a.children.length!==0)for(let c of a.children){let l=this.doc.getText($(c.range));this.nodeStore.setNode(ae(o.id,a.name,c.name),{value:l,range:c.range,table:n,denpendencyType:"Feature"}),o.features.push(l)}else{let c=this.doc.getText($(a.range));this.nodeStore.setNode(ae(o.id,a.name),{value:c,range:a.range,table:n,denpendencyType:"Feature"}),o.features.push(c)}continue}a.name==="package"&&(o.packageName=this.doc.getText($(a.range)))}this.nodeStore.dependencies.push(o)}};function ae(...r){return r.join(".")}var Ce=class{dependencies=[];nodes={};currentDeleted=new Set;path=void 0;documentVersion=0;rev=0;added=new Set;updated=new Map;constructor(){this.nodes={}}reset(){this.path=void 0}incRev(){return this.rev=this.rev+1,this.rev}init(e,t){if(this.dependencies.length=0,this.documentVersion=t,this.path!==e){this.nodes={},this.path=e,this.currentDeleted.clear(),this.added.clear(),this.updated.clear(),this.rev=1;return}this.currentDeleted.clear();for(let n of Object.keys(this.nodes))this.currentDeleted.add(n)}skip(e){return this.path!==e}isClean(){return this.added.size===0&&this.updated.size===0}node(e){return this.nodes[e]??void 0}range(e){return this.nodes[e]?.range}setNode(e,t){this.nodes[e]=t}set(e,t,n){this.nodes[e]&&this.nodes[e].value!==t.value&&this.addUpdated(e,n),this.nodes[e]||this.added.add(e),this.currentDeleted.delete(e)}taint(e,t){this.addUpdated(e,t)}addUpdated(e,t){let n=this.updated.get(e);(n===void 0||n<t)&&this.updated.set(e,t)}checkAndDelDirty(e,t){if(this.added.has(e))return this.added.delete(e),!0;let n=this.updated.get(e);return n===void 0||t<n?!1:(this.updated.delete(e),!0)}deletedIds(){return[...this.currentDeleted]}dirtyIds(){let e=Array.from(this.updated.keys()),t=Array.from(this.added);return[...e,...t]}finishWalk(){for(let e of this.currentDeleted)delete this.nodes[e]}isDirty(e,t){return this.added.has(e)?!0:this.updated.get(e)===t}};var $e=class{context;constructor(e){this.context=e}provideCompletionItems(e,t,n,s){return new Promise(async i=>{let o=await this.completionItems(e,t,n,s);i(o)})}async completionItems(e,t,n,s){let i=await Oe(e.uri);if(i.length===0)return[];let o=new pt(i,t);if(o.walk(),!o.crateName)return await On(e,t);if(o.versionNode&&o.versionNode.range.contains(t))return await ut(this.context,o.crateName,o.versionNode.range);if(o.featuresNode&&o.featuresNode.children.length!==0){if(o.featuresNode.range.contains(t)){let a=e.getText($(o.versionNode?.range)),c,l=[];for(let u of o.featuresNode.children){if(u.range.contains(t)){c=u.range;continue}l.push(e.getText($(u.range)))}return await Cn(this.context,o.crateName,a,l,c)}return[]}return o.isComplexDependencyBlock?[]:await ut(this.context,o.crateName,o.crateRange)}},pt=class extends ce{isComplexDependencyBlock=!1;crateName;crateRange;versionNode;featuresNode;position;constructor(e,t){super(e,0),this.position=t}enterTable(e,t){return!1}enterDependencies(e,t){return!!e.range.contains(this.position)}enterCrate(e){return!!e.range.contains(this.position)}onCrate(e,t){if(this.crateName=t.name,this.crateRange=t.range,t.children.length!==0){this.isComplexDependencyBlock=!0;for(let n of t.children){if(n.name==="version"){this.versionNode=n;continue}if(n.name==="features"){this.featuresNode=n;continue}}}this.enterCrate=n=>!1}};var w=require("vscode");var k=require("vscode"),Le=class{uri;state;constructor(){this.state={}}init(e){if(this.uri!==e){this.state={},this.uri=e;return}}reset(){this.state={},this.uri=void 0}delete(e){this.state[e]&&(this.state[e].decoration.dispose(),delete this.state[e])}get(e){return this.state[e]}set(e,t){this.state[e]=t}};function kn(r){return k.window.createTextEditorDecorationType({after:{contentText:"\u2705 "+r,color:"green",margin:"0 0 0 4em"}})}function _n(r){return r.currentMax!==""&&r.current===r.currentMax?k.window.createTextEditorDecorationType({after:{contentText:"\u{1F512} "+r.current+", "+r.latest,color:"orange",margin:"0 0 0 4em"}}):r.currentMax&&r.current!==r.currentMax?k.window.createTextEditorDecorationType({after:{contentText:"\u2B06\uFE0F "+r.current+"==>"+r.currentMax+", "+r.latest,color:"yellow",margin:"0 0 0 4em"}}):k.window.createTextEditorDecorationType({after:{contentText:"\u2B06\uFE0F "+r.current+"==>"+r.latest,color:"yellow",margin:"0 0 0 4em"}})}function Un(){return k.window.createTextEditorDecorationType({after:{contentText:"Waiting...",color:"grey",margin:"0 0 0 4em"}})}function jn(){return k.window.createTextEditorDecorationType({after:{contentText:"Not Installed",color:"grey",margin:"0 0 0 4em"}})}async function Fn(r){let e=await yt(`cargo tree --manifest-path ${r} --depth 1 --all-features`).catch(t=>{throw t});return na(e)}function na(r){let e=r.split(`
`),t={dependencies:{},"build-dependencies":{},"dev-dependencies":{}},n="dependencies";function s(o){let a=o.trim();a==="[build-dependencies]"?n="build-dependencies":a==="[dev-dependencies]"&&(n="dev-dependencies")}function i(o){let a=!1,c=!1,l,u=o.trim().split(/\s+/);if(u.length<3)return null;let d=u[1],g=u[2].startsWith("v")?u[2].substring(1):u[2];for(let f of u.slice(3))f==="(*)"?a=!0:f==="(proc-macro)"?c=!0:f.startsWith("(")&&f.endsWith(")")&&(l=f.slice(1,-1));return{name:d,version:g,path:l,procMacro:c,deduplicated:a}}return e.forEach(o=>{if(s(o),n&&(o.trim().startsWith("\u251C\u2500\u2500")||o.trim().startsWith("\u2514\u2500\u2500"))){let a=i(o);a&&(t[n][a.name]=a)}}),t}var le=require("vscode"),Ae=class{collection;state={};constructor(){this.collection=le.languages.createDiagnosticCollection("crates-cmp")}addRaw(e,t,n){if(this.state[e]){this.state[e].push(new le.Diagnostic(t,n.message,n.severity));return}this.state[e]=[new le.Diagnostic(t,n.message,n.severity)]}add(e,...t){if(this.state[e]){this.state[e]=this.state[e].concat(t);return}this.state[e]=t}set(e){this.collection.set(e,this.state[e.path])}clearSeverity(e,t){this.state[e.path]&&(this.state[e.path]=this.state[e.path].filter(n=>n.severity!==t),this.collection.set(e,this.state[e.path]))}};var Pe=class{cache;constructor(){this.cache=new Map}call(e,t,...n){if(this.cache.has(e))return this.cache.get(e);let s=t(...n);return this.cache.set(e,s),s.finally(()=>{this.cache.delete(e)}),s}};var sa=new Pe,qe=class{ctx;decorationStore=new Le;nodeStore=new Ce;diagnosticStore=new Ae;constructor(e){this.ctx=e}async onChange(e){let t=e.version,n=await Oe(e.uri);if(n.length===0||this.nodeStore.skip(e.uri.path)||e.version!==t)return;let s={extensionContext:this.ctx,path:e.uri.path,rev:this.nodeStore.incRev(),uri:e.uri};new Ie(n,e,this.nodeStore,s.rev).walk(),this.nodeStore.finishWalk(),this.clearDecoration(this.nodeStore.deletedIds()),!this.nodeStore.isClean()&&(this.setWaitingNodes(this.nodeStore.dirtyIds()),await this.patchNodeStore(s))}outputPromiseHandler(e){this.nodeStore.checkAndDelDirty(e.decoration.id,e.ctx.rev)&&this.decorate(e.decoration.id,e.decoration)}setWaitingNodes(e){for(let t of e)this.decorate(t,{id:t,current:"",currentMax:"",latest:"",status:"Loading"})}clearDecoration(e){if(e.length!==0)for(let t of e)this.decorationStore.delete(t)}decorate(e,t){let n=this.decorationStore.get(e);if(n){if(n.latest===t.latest&&n.status===t.status)return this.nodeStore.range(e)&&w.window.activeTextEditor?.setDecorations(n.decoration,[this.nodeStore.range(e)]),n.decoration;n.decoration.dispose()}let s;switch(t.status){case"Latest":s=kn(t.latest);break;case"Outdated":s=_n(t);break;case"Loading":s=Un();break;case"Not Installed":s=jn();break}this.decorationStore.set(e,{latest:t.latest,status:t.status,decoration:s}),this.nodeStore.range(e)&&w.window.activeTextEditor?.setDecorations(s,[this.nodeStore.range(e)])}async onDidSaveTextDocument(e){e.fileName.endsWith("Cargo.toml")&&(this.init(e),await this.onChange(e))}async onDidChangeActiveEditor(e){if(e){if(!e.document.fileName.endsWith("Cargo.toml")){this.nodeStore.reset();return}this.init(e.document),await this.onChange(e.document)}}async onDidLockFileChange(){if(!w.window.activeTextEditor||!w.window.activeTextEditor.document.fileName.endsWith("Cargo.toml")||!this.nodeStore.path)return;let e={extensionContext:this.ctx,path:w.window.activeTextEditor.document.uri.path,rev:this.nodeStore.incRev(),uri:w.window.activeTextEditor.document.uri};await this.patchNodeStore(e)}onDidCloseTextDocument(e){e.fileName.endsWith("Cargo.toml")&&(this.nodeStore.skip(e.uri.path)||this.nodeStore.reset())}init(e){this.nodeStore.init(e.uri.path,e.version),this.decorationStore.init(e.uri.path)}reset(){this.nodeStore.reset(),this.decorationStore.reset()}async patchNodeStore(e){let t=await N(sa.call(e.path,Fn,e.path));if(t.isErr()){if(this.nodeStore.isClean())return;let c=this.nodeStore.dependencies.filter(d=>this.nodeStore.isDirty(d.id,e.rev)),l=await In(e,c);if(l.length===0)return;let u=[];l.filter(d=>this.nodeStore.checkAndDelDirty(d.diagnostic.id,d.ctx.rev)).forEach(d=>{u.push(d.diagnostic.id),this.diagnosticStore.addRaw(d.ctx.path,this.nodeStore.range(d.diagnostic.id),d.diagnostic)}),this.clearDecoration(u),this.diagnosticStore.set(e.uri);return}if(!w.window.activeTextEditor||!w.window.activeTextEditor.document.fileName.endsWith("Cargo.toml")||!this.nodeStore.path||this.nodeStore.skip(e.path))return;this.diagnosticStore.clearSeverity(e.uri,w.DiagnosticSeverity.Error);let n=new Set,s={},i=[],o=t.unwrap();for(let c of this.nodeStore.dependencies)if(o[c.tableName]){let l=o[c.tableName],u=c.packageName??c.name;if(l[u]){c.currentVersion!==void 0&&c.currentVersion!==l[u].version&&(this.nodeStore.taint(c.id,e.rev),i.push(c.id)),c.currentVersion=l[u].version,s[u]?(s[u].versions.add(c.currentVersion),s[u].ids.push(c.id),s[u].versions.size>1&&n.add(u)):s[u]={versions:new Set([c.currentVersion]),ids:[c.id]};continue}}if(n.size!==0){for(let c of n){let l="Found multiple versions: "+Array.from(s[c].versions).join(", "),u=s[c].ids.map(d=>new w.Diagnostic(this.nodeStore.range(d),l,w.DiagnosticSeverity.Information));this.diagnosticStore.add(e.path,...u)}this.diagnosticStore.set(e.uri)}else this.diagnosticStore.clearSeverity(e.uri,w.DiagnosticSeverity.Information);if(i.length!==0&&this.setWaitingNodes(i),this.nodeStore.isClean())return;vn(e,this.nodeStore.dependencies).forEach(c=>c.then(this.outputPromiseHandler.bind(this)))}};var Vn=require("vscode"),ht=class{client=void 0;dependencies={};async init(){let e=Vn.extensions.getExtension("rust-lang.rust-analyzer");if(!e)throw new Error("Require Rust Analyzer");let t=await e.activate();if(!t.client)throw new Error("Require Rust Analyzer");t.client.start(),this.client=t.client}stop(){if(this.client)return this.client.stop()}async dependencyList(){let e=await this.client?.sendRequest("rust-analyzer/fetchDependencyList",{});for(let t of e.crates)this.dependencies[t.name]=t}dependency(e){return this.dependencies[e]}languageClient(){return this.client}},Gn=new ht;async function ia(r){let e={language:"toml",pattern:"**/Cargo.toml"},t=new qe(r);r.subscriptions.push(P.window.onDidChangeActiveTextEditor(t.onDidChangeActiveEditor,t),P.workspace.onDidSaveTextDocument(t.onDidSaveTextDocument,t),P.workspace.onDidCloseTextDocument(t.onDidCloseTextDocument,t),P.workspace.createFileSystemWatcher("**/Cargo.lock").onDidChange(t.onDidLockFileChange,t),P.languages.registerCompletionItemProvider(e,new $e(r),'"',".","+","-","0","1","2","3","4","5","6","7","8","9"))}function oa(){return Gn.stop()}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

ky/distribution/index.js:
  (*! MIT License  Sindre Sorhus *)
*/
