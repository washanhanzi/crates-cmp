"use strict";var Bs=Object.create;var pe=Object.defineProperty;var Ws=Object.getOwnPropertyDescriptor;var Hs=Object.getOwnPropertyNames;var zs=Object.getPrototypeOf,Ks=Object.prototype.hasOwnProperty;var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ys=(r,e)=>{for(var t in e)pe(r,t,{get:e[t],enumerable:!0})},xt=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Hs(e))!Ks.call(r,n)&&n!==t&&pe(r,n,{get:()=>e[n],enumerable:!(s=Ws(e,n))||s.enumerable});return r};var fe=(r,e,t)=>(t=r!=null?Bs(zs(r)):{},xt(e||!r||!r.__esModule?pe(t,"default",{value:r,enumerable:!0}):t,r)),Js=r=>xt(pe({},"__esModule",{value:!0}),r);var Q=E((Ya,kt)=>{var rn="2.0.0",sn=Number.MAX_SAFE_INTEGER||9007199254740991,nn=16,on=250,an=["major","premajor","minor","preminor","patch","prepatch","prerelease"];kt.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:nn,MAX_SAFE_BUILD_LENGTH:on,MAX_SAFE_INTEGER:sn,RELEASE_TYPES:an,SEMVER_SPEC_VERSION:rn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Z=E((Ja,_t)=>{var cn=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};_t.exports=cn});var G=E((I,Ut)=>{var{MAX_SAFE_COMPONENT_LENGTH:Ve,MAX_SAFE_BUILD_LENGTH:ln,MAX_LENGTH:un}=Q(),dn=Z();I=Ut.exports={};var pn=I.re=[],fn=I.safeRe=[],p=I.src=[],f=I.t={},hn=0,Ge="[a-zA-Z0-9-]",mn=[["\\s",1],["\\d",un],[Ge,ln]],En=r=>{for(let[e,t]of mn)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},g=(r,e,t)=>{let s=En(e),n=hn++;dn(r,n,e),f[r]=n,p[n]=e,pn[n]=new RegExp(e,t?"g":void 0),fn[n]=new RegExp(s,t?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*");g("NUMERICIDENTIFIERLOOSE","\\d+");g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Ge}*`);g("MAINVERSION",`(${p[f.NUMERICIDENTIFIER]})\\.(${p[f.NUMERICIDENTIFIER]})\\.(${p[f.NUMERICIDENTIFIER]})`);g("MAINVERSIONLOOSE",`(${p[f.NUMERICIDENTIFIERLOOSE]})\\.(${p[f.NUMERICIDENTIFIERLOOSE]})\\.(${p[f.NUMERICIDENTIFIERLOOSE]})`);g("PRERELEASEIDENTIFIER",`(?:${p[f.NUMERICIDENTIFIER]}|${p[f.NONNUMERICIDENTIFIER]})`);g("PRERELEASEIDENTIFIERLOOSE",`(?:${p[f.NUMERICIDENTIFIERLOOSE]}|${p[f.NONNUMERICIDENTIFIER]})`);g("PRERELEASE",`(?:-(${p[f.PRERELEASEIDENTIFIER]}(?:\\.${p[f.PRERELEASEIDENTIFIER]})*))`);g("PRERELEASELOOSE",`(?:-?(${p[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[f.PRERELEASEIDENTIFIERLOOSE]})*))`);g("BUILDIDENTIFIER",`${Ge}+`);g("BUILD",`(?:\\+(${p[f.BUILDIDENTIFIER]}(?:\\.${p[f.BUILDIDENTIFIER]})*))`);g("FULLPLAIN",`v?${p[f.MAINVERSION]}${p[f.PRERELEASE]}?${p[f.BUILD]}?`);g("FULL",`^${p[f.FULLPLAIN]}$`);g("LOOSEPLAIN",`[v=\\s]*${p[f.MAINVERSIONLOOSE]}${p[f.PRERELEASELOOSE]}?${p[f.BUILD]}?`);g("LOOSE",`^${p[f.LOOSEPLAIN]}$`);g("GTLT","((?:<|>)?=?)");g("XRANGEIDENTIFIERLOOSE",`${p[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);g("XRANGEIDENTIFIER",`${p[f.NUMERICIDENTIFIER]}|x|X|\\*`);g("XRANGEPLAIN",`[v=\\s]*(${p[f.XRANGEIDENTIFIER]})(?:\\.(${p[f.XRANGEIDENTIFIER]})(?:\\.(${p[f.XRANGEIDENTIFIER]})(?:${p[f.PRERELEASE]})?${p[f.BUILD]}?)?)?`);g("XRANGEPLAINLOOSE",`[v=\\s]*(${p[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[f.XRANGEIDENTIFIERLOOSE]})(?:${p[f.PRERELEASELOOSE]})?${p[f.BUILD]}?)?)?`);g("XRANGE",`^${p[f.GTLT]}\\s*${p[f.XRANGEPLAIN]}$`);g("XRANGELOOSE",`^${p[f.GTLT]}\\s*${p[f.XRANGEPLAINLOOSE]}$`);g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ve}})(?:\\.(\\d{1,${Ve}}))?(?:\\.(\\d{1,${Ve}}))?`);g("COERCE",`${p[f.COERCEPLAIN]}(?:$|[^\\d])`);g("COERCEFULL",p[f.COERCEPLAIN]+`(?:${p[f.PRERELEASE]})?(?:${p[f.BUILD]})?(?:$|[^\\d])`);g("COERCERTL",p[f.COERCE],!0);g("COERCERTLFULL",p[f.COERCEFULL],!0);g("LONETILDE","(?:~>?)");g("TILDETRIM",`(\\s*)${p[f.LONETILDE]}\\s+`,!0);I.tildeTrimReplace="$1~";g("TILDE",`^${p[f.LONETILDE]}${p[f.XRANGEPLAIN]}$`);g("TILDELOOSE",`^${p[f.LONETILDE]}${p[f.XRANGEPLAINLOOSE]}$`);g("LONECARET","(?:\\^)");g("CARETTRIM",`(\\s*)${p[f.LONECARET]}\\s+`,!0);I.caretTrimReplace="$1^";g("CARET",`^${p[f.LONECARET]}${p[f.XRANGEPLAIN]}$`);g("CARETLOOSE",`^${p[f.LONECARET]}${p[f.XRANGEPLAINLOOSE]}$`);g("COMPARATORLOOSE",`^${p[f.GTLT]}\\s*(${p[f.LOOSEPLAIN]})$|^$`);g("COMPARATOR",`^${p[f.GTLT]}\\s*(${p[f.FULLPLAIN]})$|^$`);g("COMPARATORTRIM",`(\\s*)${p[f.GTLT]}\\s*(${p[f.LOOSEPLAIN]}|${p[f.XRANGEPLAIN]})`,!0);I.comparatorTrimReplace="$1$2$3";g("HYPHENRANGE",`^\\s*(${p[f.XRANGEPLAIN]})\\s+-\\s+(${p[f.XRANGEPLAIN]})\\s*$`);g("HYPHENRANGELOOSE",`^\\s*(${p[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[f.XRANGEPLAINLOOSE]})\\s*$`);g("STAR","(<|>)?=?\\s*\\*");g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ye=E((Qa,jt)=>{var gn=Object.freeze({loose:!0}),yn=Object.freeze({}),Tn=r=>r?typeof r!="object"?gn:r:yn;jt.exports=Tn});var Me=E((Za,Gt)=>{var Ft=/^[0-9]+$/,Vt=(r,e)=>{let t=Ft.test(r),s=Ft.test(e);return t&&s&&(r=+r,e=+e),r===e?0:t&&!s?-1:s&&!t?1:r<e?-1:1},xn=(r,e)=>Vt(e,r);Gt.exports={compareIdentifiers:Vt,rcompareIdentifiers:xn}});var x=E((ec,Wt)=>{var Te=Z(),{MAX_LENGTH:Mt,MAX_SAFE_INTEGER:xe}=Q(),{safeRe:Xt,t:Bt}=G(),Nn=ye(),{compareIdentifiers:M}=Me(),Xe=class r{constructor(e,t){if(t=Nn(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Mt)throw new TypeError(`version is longer than ${Mt} characters`);Te("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let s=e.trim().match(t.loose?Xt[Bt.LOOSE]:Xt[Bt.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>xe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>xe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>xe||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<xe)return i}return n}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Te("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),M(this.major,e.major)||M(this.minor,e.minor)||M(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let s=this.prerelease[t],n=e.prerelease[t];if(Te("prerelease compare",t,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return M(s,n)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let s=this.build[t],n=e.build[t];if(Te("build compare",t,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return M(s,n)}while(++t)}inc(e,t,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(s)?1:0;if(!t&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(t){let i=[t,n];s===!1&&(i=[t]),M(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Wt.exports=Xe});var _=E((tc,zt)=>{var Ht=x(),wn=(r,e,t=!1)=>{if(r instanceof Ht)return r;try{return new Ht(r,e)}catch(s){if(!t)return null;throw s}};zt.exports=wn});var Yt=E((rc,Kt)=>{var vn=_(),Rn=(r,e)=>{let t=vn(r,e);return t?t.version:null};Kt.exports=Rn});var Qt=E((sc,Jt)=>{var Dn=_(),Sn=(r,e)=>{let t=Dn(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Jt.exports=Sn});var tr=E((nc,er)=>{var Zt=x(),bn=(r,e,t,s,n)=>{typeof t=="string"&&(n=s,s=t,t=void 0);try{return new Zt(r instanceof Zt?r.version:r,t).inc(e,s,n).version}catch{return null}};er.exports=bn});var nr=E((ic,sr)=>{var rr=_(),In=(r,e)=>{let t=rr(r,null,!0),s=rr(e,null,!0),n=t.compare(s);if(n===0)return null;let i=n>0,o=i?t:s,a=i?s:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let h=c?"pre":"";return t.major!==s.major?h+"major":t.minor!==s.minor?h+"minor":t.patch!==s.patch?h+"patch":"prerelease"};sr.exports=In});var or=E((oc,ir)=>{var Cn=x(),On=(r,e)=>new Cn(r,e).major;ir.exports=On});var cr=E((ac,ar)=>{var $n=x(),Ln=(r,e)=>new $n(r,e).minor;ar.exports=Ln});var ur=E((cc,lr)=>{var An=x(),Pn=(r,e)=>new An(r,e).patch;lr.exports=Pn});var pr=E((lc,dr)=>{var qn=_(),kn=(r,e)=>{let t=qn(r,e);return t&&t.prerelease.length?t.prerelease:null};dr.exports=kn});var D=E((uc,hr)=>{var fr=x(),_n=(r,e,t)=>new fr(r,t).compare(new fr(e,t));hr.exports=_n});var Er=E((dc,mr)=>{var Un=D(),jn=(r,e,t)=>Un(e,r,t);mr.exports=jn});var yr=E((pc,gr)=>{var Fn=D(),Vn=(r,e)=>Fn(r,e,!0);gr.exports=Vn});var Ne=E((fc,xr)=>{var Tr=x(),Gn=(r,e,t)=>{let s=new Tr(r,t),n=new Tr(e,t);return s.compare(n)||s.compareBuild(n)};xr.exports=Gn});var wr=E((hc,Nr)=>{var Mn=Ne(),Xn=(r,e)=>r.sort((t,s)=>Mn(t,s,e));Nr.exports=Xn});var Rr=E((mc,vr)=>{var Bn=Ne(),Wn=(r,e)=>r.sort((t,s)=>Bn(s,t,e));vr.exports=Wn});var ee=E((Ec,Dr)=>{var Hn=D(),zn=(r,e,t)=>Hn(r,e,t)>0;Dr.exports=zn});var we=E((gc,Sr)=>{var Kn=D(),Yn=(r,e,t)=>Kn(r,e,t)<0;Sr.exports=Yn});var Be=E((yc,br)=>{var Jn=D(),Qn=(r,e,t)=>Jn(r,e,t)===0;br.exports=Qn});var We=E((Tc,Ir)=>{var Zn=D(),ei=(r,e,t)=>Zn(r,e,t)!==0;Ir.exports=ei});var ve=E((xc,Cr)=>{var ti=D(),ri=(r,e,t)=>ti(r,e,t)>=0;Cr.exports=ri});var Re=E((Nc,Or)=>{var si=D(),ni=(r,e,t)=>si(r,e,t)<=0;Or.exports=ni});var He=E((wc,$r)=>{var ii=Be(),oi=We(),ai=ee(),ci=ve(),li=we(),ui=Re(),di=(r,e,t,s)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return ii(r,t,s);case"!=":return oi(r,t,s);case">":return ai(r,t,s);case">=":return ci(r,t,s);case"<":return li(r,t,s);case"<=":return ui(r,t,s);default:throw new TypeError(`Invalid operator: ${e}`)}};$r.exports=di});var Ar=E((vc,Lr)=>{var pi=x(),fi=_(),{safeRe:De,t:Se}=G(),hi=(r,e)=>{if(r instanceof pi)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?De[Se.COERCEFULL]:De[Se.COERCE]);else{let c=e.includePrerelease?De[Se.COERCERTLFULL]:De[Se.COERCERTL],l;for(;(l=c.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||l.index+l[0].length!==t.index+t[0].length)&&(t=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(t===null)return null;let s=t[2],n=t[3]||"0",i=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return fi(`${s}.${n}.${i}${o}${a}`,e)};Lr.exports=hi});var qr=E((Rc,Pr)=>{var ze=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(e,t)}return this}};Pr.exports=ze});var S=E((Dc,jr)=>{var Ke=class r{constructor(e,t){if(t=Ei(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof Ye)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(n=>!_r(n[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&vi(n[0])){this.set=[n];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let s=((this.options.includePrerelease&&Ni)|(this.options.loose&&wi))+":"+e,n=kr.get(s);if(n)return n;let i=this.options.loose,o=i?v[N.HYPHENRANGELOOSE]:v[N.HYPHENRANGE];e=e.replace(o,Ai(this.options.includePrerelease)),y("hyphen replace",e),e=e.replace(v[N.COMPARATORTRIM],yi),y("comparator trim",e),e=e.replace(v[N.TILDETRIM],Ti),y("tilde trim",e),e=e.replace(v[N.CARETTRIM],xi),y("caret trim",e);let a=e.split(" ").map(d=>Ri(d,this.options)).join(" ").split(/\s+/).map(d=>Li(d,this.options));i&&(a=a.filter(d=>(y("loose invalid filter",d,this.options),!!d.match(v[N.COMPARATORLOOSE])))),y("range list",a);let c=new Map,l=a.map(d=>new Ye(d,this.options));for(let d of l){if(_r(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let h=[...c.values()];return kr.set(s,h),h}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(s=>Ur(s,t)&&e.set.some(n=>Ur(n,t)&&s.every(i=>n.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new gi(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Pi(this.set[t],e,this.options))return!0;return!1}};jr.exports=Ke;var mi=qr(),kr=new mi,Ei=ye(),Ye=te(),y=Z(),gi=x(),{safeRe:v,t:N,comparatorTrimReplace:yi,tildeTrimReplace:Ti,caretTrimReplace:xi}=G(),{FLAG_INCLUDE_PRERELEASE:Ni,FLAG_LOOSE:wi}=Q(),_r=r=>r.value==="<0.0.0-0",vi=r=>r.value==="",Ur=(r,e)=>{let t=!0,s=r.slice(),n=s.pop();for(;t&&s.length;)t=s.every(i=>n.intersects(i,e)),n=s.pop();return t},Ri=(r,e)=>(y("comp",r,e),r=bi(r,e),y("caret",r),r=Di(r,e),y("tildes",r),r=Ci(r,e),y("xrange",r),r=$i(r,e),y("stars",r),r),w=r=>!r||r.toLowerCase()==="x"||r==="*",Di=(r,e)=>r.trim().split(/\s+/).map(t=>Si(t,e)).join(" "),Si=(r,e)=>{let t=e.loose?v[N.TILDELOOSE]:v[N.TILDE];return r.replace(t,(s,n,i,o,a)=>{y("tilde",r,s,n,i,o,a);let c;return w(n)?c="":w(i)?c=`>=${n}.0.0 <${+n+1}.0.0-0`:w(o)?c=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:a?(y("replaceTilde pr",a),c=`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`):c=`>=${n}.${i}.${o} <${n}.${+i+1}.0-0`,y("tilde return",c),c})},bi=(r,e)=>r.trim().split(/\s+/).map(t=>Ii(t,e)).join(" "),Ii=(r,e)=>{y("caret",r,e);let t=e.loose?v[N.CARETLOOSE]:v[N.CARET],s=e.includePrerelease?"-0":"";return r.replace(t,(n,i,o,a,c)=>{y("caret",r,n,i,o,a,c);let l;return w(i)?l="":w(o)?l=`>=${i}.0.0${s} <${+i+1}.0.0-0`:w(a)?i==="0"?l=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.0${s} <${+i+1}.0.0-0`:c?(y("replaceCaret pr",c),i==="0"?o==="0"?l=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(y("no pr"),i==="0"?o==="0"?l=`>=${i}.${o}.${a}${s} <${i}.${o}.${+a+1}-0`:l=`>=${i}.${o}.${a}${s} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),y("caret return",l),l})},Ci=(r,e)=>(y("replaceXRanges",r,e),r.split(/\s+/).map(t=>Oi(t,e)).join(" ")),Oi=(r,e)=>{r=r.trim();let t=e.loose?v[N.XRANGELOOSE]:v[N.XRANGE];return r.replace(t,(s,n,i,o,a,c)=>{y("xRange",r,s,n,i,o,a,c);let l=w(i),h=l||w(o),d=h||w(a),m=d;return n==="="&&m&&(n=""),c=e.includePrerelease?"-0":"",l?n===">"||n==="<"?s="<0.0.0-0":s="*":n&&m?(h&&(o=0),a=0,n===">"?(n=">=",h?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):n==="<="&&(n="<",h?i=+i+1:o=+o+1),n==="<"&&(c="-0"),s=`${n+i}.${o}.${a}${c}`):h?s=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(s=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),y("xRange return",s),s})},$i=(r,e)=>(y("replaceStars",r,e),r.trim().replace(v[N.STAR],"")),Li=(r,e)=>(y("replaceGTE0",r,e),r.trim().replace(v[e.includePrerelease?N.GTE0PRE:N.GTE0],"")),Ai=r=>(e,t,s,n,i,o,a,c,l,h,d,m)=>(w(s)?t="":w(n)?t=`>=${s}.0.0${r?"-0":""}`:w(i)?t=`>=${s}.${n}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,w(l)?c="":w(h)?c=`<${+l+1}.0.0-0`:w(d)?c=`<${l}.${+h+1}.0-0`:m?c=`<=${l}.${h}.${d}-${m}`:r?c=`<${l}.${h}.${+d+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),Pi=(r,e,t)=>{for(let s=0;s<r.length;s++)if(!r[s].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let s=0;s<r.length;s++)if(y(r[s].semver),r[s].semver!==Ye.ANY&&r[s].semver.prerelease.length>0){let n=r[s].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var te=E((Sc,Br)=>{var re=Symbol("SemVer ANY"),Ze=class r{static get ANY(){return re}constructor(e,t){if(t=Fr(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Qe("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===re?this.value="":this.value=this.operator+this.semver.version,Qe("comp",this)}parse(e){let t=this.options.loose?Vr[Gr.COMPARATORLOOSE]:Vr[Gr.COMPARATOR],s=e.match(t);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new Mr(s[2],this.options.loose):this.semver=re}toString(){return this.value}test(e){if(Qe("Comparator.test",e,this.options.loose),this.semver===re||e===re)return!0;if(typeof e=="string")try{e=new Mr(e,this.options)}catch{return!1}return Je(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Xr(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new Xr(this.value,t).test(e.semver):(t=Fr(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Je(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Je(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Br.exports=Ze;var Fr=ye(),{safeRe:Vr,t:Gr}=G(),Je=He(),Qe=Z(),Mr=x(),Xr=S()});var se=E((bc,Wr)=>{var qi=S(),ki=(r,e,t)=>{try{e=new qi(e,t)}catch{return!1}return e.test(r)};Wr.exports=ki});var zr=E((Ic,Hr)=>{var _i=S(),Ui=(r,e)=>new _i(r,e).set.map(t=>t.map(s=>s.value).join(" ").trim().split(" "));Hr.exports=Ui});var Yr=E((Cc,Kr)=>{var ji=x(),Fi=S(),Vi=(r,e,t)=>{let s=null,n=null,i=null;try{i=new Fi(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!s||n.compare(o)===-1)&&(s=o,n=new ji(s,t))}),s};Kr.exports=Vi});var Qr=E((Oc,Jr)=>{var Gi=x(),Mi=S(),Xi=(r,e,t)=>{let s=null,n=null,i=null;try{i=new Mi(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!s||n.compare(o)===1)&&(s=o,n=new Gi(s,t))}),s};Jr.exports=Xi});var ts=E(($c,es)=>{var et=x(),Bi=S(),Zr=ee(),Wi=(r,e)=>{r=new Bi(r,e);let t=new et("0.0.0");if(r.test(t)||(t=new et("0.0.0-0"),r.test(t)))return t;t=null;for(let s=0;s<r.set.length;++s){let n=r.set[s],i=null;n.forEach(o=>{let a=new et(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Zr(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Zr(t,i))&&(t=i)}return t&&r.test(t)?t:null};es.exports=Wi});var ss=E((Lc,rs)=>{var Hi=S(),zi=(r,e)=>{try{return new Hi(r,e).range||"*"}catch{return null}};rs.exports=zi});var be=E((Ac,as)=>{var Ki=x(),os=te(),{ANY:Yi}=os,Ji=S(),Qi=se(),ns=ee(),is=we(),Zi=Re(),eo=ve(),to=(r,e,t,s)=>{r=new Ki(r,s),e=new Ji(e,s);let n,i,o,a,c;switch(t){case">":n=ns,i=Zi,o=is,a=">",c=">=";break;case"<":n=is,i=eo,o=ns,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Qi(r,e,s))return!1;for(let l=0;l<e.set.length;++l){let h=e.set[l],d=null,m=null;if(h.forEach(u=>{u.semver===Yi&&(u=new os(">=0.0.0")),d=d||u,m=m||u,n(u.semver,d.semver,s)?d=u:o(u.semver,m.semver,s)&&(m=u)}),d.operator===a||d.operator===c||(!m.operator||m.operator===a)&&i(r,m.semver))return!1;if(m.operator===c&&o(r,m.semver))return!1}return!0};as.exports=to});var ls=E((Pc,cs)=>{var ro=be(),so=(r,e,t)=>ro(r,e,">",t);cs.exports=so});var ds=E((qc,us)=>{var no=be(),io=(r,e,t)=>no(r,e,"<",t);us.exports=io});var hs=E((kc,fs)=>{var ps=S(),oo=(r,e,t)=>(r=new ps(r,t),e=new ps(e,t),r.intersects(e,t));fs.exports=oo});var Es=E((_c,ms)=>{var ao=se(),co=D();ms.exports=(r,e,t)=>{let s=[],n=null,i=null,o=r.sort((h,d)=>co(h,d,t));for(let h of o)ao(h,e,t)?(i=h,n||(n=h)):(i&&s.push([n,i]),i=null,n=null);n&&s.push([n,null]);let a=[];for(let[h,d]of s)h===d?a.push(h):!d&&h===o[0]?a.push("*"):d?h===o[0]?a.push(`<=${d}`):a.push(`${h} - ${d}`):a.push(`>=${h}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var ws=E((Uc,Ns)=>{var gs=S(),rt=te(),{ANY:tt}=rt,ne=se(),st=D(),lo=(r,e,t={})=>{if(r===e)return!0;r=new gs(r,t),e=new gs(e,t);let s=!1;e:for(let n of r.set){for(let i of e.set){let o=po(n,i,t);if(s=s||o!==null,o)continue e}if(s)return!1}return!0},uo=[new rt(">=0.0.0-0")],ys=[new rt(">=0.0.0")],po=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===tt){if(e.length===1&&e[0].semver===tt)return!0;t.includePrerelease?r=uo:r=ys}if(e.length===1&&e[0].semver===tt){if(t.includePrerelease)return!0;e=ys}let s=new Set,n,i;for(let u of r)u.operator===">"||u.operator===">="?n=Ts(n,u,t):u.operator==="<"||u.operator==="<="?i=xs(i,u,t):s.add(u.semver);if(s.size>1)return null;let o;if(n&&i){if(o=st(n.semver,i.semver,t),o>0)return null;if(o===0&&(n.operator!==">="||i.operator!=="<="))return null}for(let u of s){if(n&&!ne(u,String(n),t)||i&&!ne(u,String(i),t))return null;for(let T of e)if(!ne(u,String(T),t))return!1;return!0}let a,c,l,h,d=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let u of e){if(h=h||u.operator===">"||u.operator===">=",l=l||u.operator==="<"||u.operator==="<=",n){if(m&&u.semver.prerelease&&u.semver.prerelease.length&&u.semver.major===m.major&&u.semver.minor===m.minor&&u.semver.patch===m.patch&&(m=!1),u.operator===">"||u.operator===">="){if(a=Ts(n,u,t),a===u&&a!==n)return!1}else if(n.operator===">="&&!ne(n.semver,String(u),t))return!1}if(i){if(d&&u.semver.prerelease&&u.semver.prerelease.length&&u.semver.major===d.major&&u.semver.minor===d.minor&&u.semver.patch===d.patch&&(d=!1),u.operator==="<"||u.operator==="<="){if(c=xs(i,u,t),c===u&&c!==i)return!1}else if(i.operator==="<="&&!ne(i.semver,String(u),t))return!1}if(!u.operator&&(i||n)&&o!==0)return!1}return!(n&&l&&!i&&o!==0||i&&h&&!n&&o!==0||m||d)},Ts=(r,e,t)=>{if(!r)return e;let s=st(r.semver,e.semver,t);return s>0?r:s<0||e.operator===">"&&r.operator===">="?e:r},xs=(r,e,t)=>{if(!r)return e;let s=st(r.semver,e.semver,t);return s<0?r:s>0||e.operator==="<"&&r.operator==="<="?e:r};Ns.exports=lo});var ie=E((jc,Ds)=>{var nt=G(),vs=Q(),fo=x(),Rs=Me(),ho=_(),mo=Yt(),Eo=Qt(),go=tr(),yo=nr(),To=or(),xo=cr(),No=ur(),wo=pr(),vo=D(),Ro=Er(),Do=yr(),So=Ne(),bo=wr(),Io=Rr(),Co=ee(),Oo=we(),$o=Be(),Lo=We(),Ao=ve(),Po=Re(),qo=He(),ko=Ar(),_o=te(),Uo=S(),jo=se(),Fo=zr(),Vo=Yr(),Go=Qr(),Mo=ts(),Xo=ss(),Bo=be(),Wo=ls(),Ho=ds(),zo=hs(),Ko=Es(),Yo=ws();Ds.exports={parse:ho,valid:mo,clean:Eo,inc:go,diff:yo,major:To,minor:xo,patch:No,prerelease:wo,compare:vo,rcompare:Ro,compareLoose:Do,compareBuild:So,sort:bo,rsort:Io,gt:Co,lt:Oo,eq:$o,neq:Lo,gte:Ao,lte:Po,cmp:qo,coerce:ko,Comparator:_o,Range:Uo,satisfies:jo,toComparators:Fo,maxSatisfying:Vo,minSatisfying:Go,minVersion:Mo,validRange:Xo,outside:Bo,gtr:Wo,ltr:Ho,intersects:zo,simplifyRange:Ko,subset:Yo,SemVer:fo,re:nt.re,src:nt.src,tokens:nt.t,SEMVER_SPEC_VERSION:vs.SEMVER_SPEC_VERSION,RELEASE_TYPES:vs.RELEASE_TYPES,compareIdentifiers:Rs.compareIdentifiers,rcompareIdentifiers:Rs.rcompareIdentifiers}});var fa={};Ys(fa,{activate:()=>da,deactivate:()=>pa});module.exports=Js(fa);var k=require("vscode");function j(r){return'"'+r+'"'}function Nt(r){return r===void 0?!0:typeof r=="string"||Array.isArray(r)?r.length===0:typeof r=="object"&&r!==null?Object.keys(r).length===0:!1}var qe="abcdefghijklmnopqrstuvwxyz";function F(r){if(r<0||!Number.isInteger(r))throw new Error("Input must be a non-negative integer.");let e=Math.floor(r/qe.length),t=qe[r%qe.length];return"z".repeat(e)+t}var wt=require("child_process");function vt(r){return new Promise((e,t)=>{let s=(0,wt.exec)(r),n="",i="";s.stdout?.on("data",o=>{n+=o}),s.stderr?.on("data",o=>{i+=o}),s.on("exit",o=>{o===0?e(n):t(new Error(i))}),s.on("close",o=>{o===0?e(n):t(new Error(i||"Unknown error"))}),s.on("error",o=>{console.error("Failed to start subprocess:",o),t(o)})})}var z=class extends Error{constructor(e,t,s){let n=e.status||e.status===0?e.status:"",i=e.statusText||"",o=`${n} ${i}`.trim(),a=o?`status code ${o}`:"an unknown error";super(`Request failed with ${a}: ${t.method} ${t.url}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=e,this.request=t,this.options=s}};var V=class extends Error{constructor(e){super(`Request timed out: ${e.method} ${e.url}`),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=e}};var K=r=>r!==null&&typeof r=="object";var Y=(...r)=>{for(let e of r)if((!K(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return he({},...r)},ke=(r={},e={})=>{let t=new globalThis.Headers(r),s=e instanceof globalThis.Headers,n=new globalThis.Headers(e);for(let[i,o]of n.entries())s&&o==="undefined"||o===void 0?t.delete(i):t.set(i,o);return t},he=(...r)=>{let e={},t={};for(let s of r)if(Array.isArray(s))Array.isArray(e)||(e=[]),e=[...e,...s];else if(K(s)){for(let[n,i]of Object.entries(s))K(i)&&n in e&&(i=he(e[n],i)),e={...e,[n]:i};K(s.headers)&&(t=ke(t,s.headers),e.headers=t)}return e};var Rt=(()=>{let r=!1,e=!1,t=typeof globalThis.ReadableStream=="function",s=typeof globalThis.Request=="function";if(t&&s)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type")}catch(n){if(n instanceof Error&&n.message==="unsupported BodyInit type")return!1;throw n}return r&&!e})(),Dt=typeof globalThis.AbortController=="function",St=typeof globalThis.ReadableStream=="function",bt=typeof globalThis.FormData=="function",me=["get","post","put","patch","head","delete"],Qs=()=>{};Qs();var It={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},Ee=2147483647,ge=Symbol("stop"),Ct={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},Ot={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0};var Lt=r=>me.includes(r)?r.toUpperCase():r,Zs=["get","put","head","delete","options","trace"],en=[408,413,429,500,502,503,504],At=[413,429,503],$t={limit:2,methods:Zs,statusCodes:en,afterStatusCodes:At,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:r=>.3*2**(r-1)*1e3},Pt=(r={})=>{if(typeof r=="number")return{...$t,limit:r};if(r.methods&&!Array.isArray(r.methods))throw new Error("retry.methods must be an array");if(r.statusCodes&&!Array.isArray(r.statusCodes))throw new Error("retry.statusCodes must be an array");return{...$t,...r,afterStatusCodes:At}};async function _e(r,e,t,s){return new Promise((n,i)=>{let o=setTimeout(()=>{t&&t.abort(),i(new V(r))},s.timeout);s.fetch(r,e).then(n).catch(i).then(()=>{clearTimeout(o)})})}async function Ue(r,{signal:e}){return new Promise((t,s)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",n,{once:!0}));function n(){clearTimeout(i),s(e.reason)}let i=setTimeout(()=>{e?.removeEventListener("abort",n),t()},r)})}var qt=(r,e)=>{let t={};for(let s in e)!(s in Ot)&&!(s in Ct)&&!(s in r)&&(t[s]=e[s]);return t};var J=class r{static create(e,t){let s=new r(e,t),n=async()=>{if(typeof s._options.timeout=="number"&&s._options.timeout>Ee)throw new RangeError(`The \`timeout\` option cannot be greater than ${Ee}`);await Promise.resolve();let a=await s._fetch();for(let c of s._options.hooks.afterResponse){let l=await c(s.request,s._options,s._decorateResponse(a.clone()));l instanceof globalThis.Response&&(a=l)}if(s._decorateResponse(a),!a.ok&&s._options.throwHttpErrors){let c=new z(a,s.request,s._options);for(let l of s._options.hooks.beforeError)c=await l(c);throw c}if(s._options.onDownloadProgress){if(typeof s._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!St)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return s._stream(a.clone(),s._options.onDownloadProgress)}return a},o=s._options.retry.methods.includes(s.request.method.toLowerCase())?s._retry(n):n();for(let[a,c]of Object.entries(It))o[a]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||c);let h=(await o).clone();if(a==="json"){if(h.status===204||(await h.clone().arrayBuffer()).byteLength===0)return"";if(t.parseJson)return t.parseJson(await h.text())}return h[a]()};return o}constructor(e,t={}){Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e;let s=this._input instanceof Request&&"credentials"in Request.prototype?this._input.credentials:void 0;if(this._options={...s&&{credentials:s},...t,headers:ke(this._input.headers,t.headers),hooks:he({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:Lt(t.method??this._input.method),prefixUrl:String(t.prefixUrl||""),retry:Pt(t.retry),throwHttpErrors:t.throwHttpErrors!==!1,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Dt){if(this.abortController=new globalThis.AbortController,this._options.signal){let n=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(n.reason)})}this._options.signal=this.abortController.signal}if(Rt&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){let i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),o=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(bt&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(o,{...this.request}),this._options)}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<=this._options.retry.limit&&!(e instanceof V)){if(e instanceof z){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;let s=e.response.headers.get("Retry-After");if(s&&this._options.retry.afterStatusCodes.includes(e.response.status)){let n=Number(s)*1e3;Number.isNaN(n)&&(n=Date.parse(s)-Date.now());let i=this._options.retry.maxRetryAfter??n;return n<i?n:i}if(e.response.status===413)return 0}let t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){let s=Math.min(this._calculateRetryDelay(t),Ee);if(s!==0&&this._retryCount>0){await Ue(s,{signal:this._options.signal});for(let n of this._options.hooks.beforeRetry)if(await n({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===ge)return;return this._retry(e)}throw t}}async _fetch(){for(let s of this._options.hooks.beforeRequest){let n=await s(this.request,this._options);if(n instanceof Request){this.request=n;break}if(n instanceof Response)return n}let e=qt(this.request,this._options),t=this.request;return this.request=t.clone(),this._options.timeout===!1?this._options.fetch(t,e):_e(t,e,this.abortController,this._options)}_stream(e,t){let s=Number(e.headers.get("content-length"))||0,n=0;return e.status===204?(t&&t({percent:1,totalBytes:s,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(i){let o=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:s},new Uint8Array);async function a(){let{done:c,value:l}=await o.read();if(c){i.close();return}if(t){n+=l.byteLength;let h=s===0?0:n/s;t({percent:h,transferredBytes:n,totalBytes:s},l)}i.enqueue(l),await a()}await a()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}};var je=r=>{let e=(t,s)=>J.create(t,Y(r,s));for(let t of me)e[t]=(s,n)=>J.create(s,Y(r,n,{method:t}));return e.create=t=>je(Y(t)),e.extend=t=>je(Y(r,t)),e.stop=ge,e},tn=je(),Fe=tn;var oe=fe(ie()),Jo="https://index.crates.io";async function it(r,e=Jo){let t=r.replace(/"/g,"").toLocaleLowerCase(),s="";t.length<=2?s=t.length.toString():t.length===3?s="3/"+t.substring(0,1):s=t.substring(0,2)+"/"+t.substring(2,4);let n=await Fe.get(`${e}/${s}/${t}`);if(n.status!==200)throw new Error(`get crates metadata error: statusCode=${n.status} ${await n.text()}`);let i=(await n.text()).split(`
`).filter(m=>m),o=[],a={},c={},l=[],h=null,d=null;for(let m=i.length-1;m>=0;m--){let u=JSON.parse(i[m]);if(u.yanked===!1){o.push(u.vers),h===null&&(0,oe.prerelease)(u.vers)===null?h=u.vers:d===null&&(0,oe.prerelease)(u.vers)!==null&&(d=u.vers),u.rust_version&&(c[u.vers]=u.rust_version);let T=Object.keys(u.features).filter(H=>H==="default"?(l=u.features.default,!1):!0),Tt=[];u.features2&&(Tt=Object.keys(u.features2)),a[u.vers]=[...T,...Tt];for(let H of u.deps)H.optional&&(0,oe.satisfies)(u.vers,H.req)&&a[u.vers].push(H.name)}}return{name:r,versions:o,features:a,defaultFeatures:l,rustVersion:c,createdAt:new Date().getUTCMilliseconds(),latestStable:h,latestPrerelease:d}}async function ot(r){if(r==="")return[];let e=await Fe.get("https://crates.io/api/v1/crates?page=1&per_page=30&q="+r,{headers:{"User-Agent":"VSCodeExtension/crates-cmp"}});if(e.status!==200)throw new Error(`search crate error: statusCode=${e.status} ${await e.text()}`);return(await e.json()).crates}async function C(r,e,t=!1){let s=Qo(e);if(t){let i=await it(e);return r.globalState.update(s,i),i}let n=r.globalState.get(s);if(!n||n.createdAt>new Date().getUTCMilliseconds()-1e3*60*10){let i=await it(e);return r.globalState.update(s,i),i}return n}function Qo(r){return`crates-cmp:metadata:${r}`}async function Ss(r,e){return(await C(r,e)).versions}var ae=Symbol("None"),ce=class r{val;constructor(e){this.val=e}get[Symbol.toStringTag](){return"Option"}*[Symbol.iterator](){this.isSome()&&(yield this.val)}isSome(){return this.val!==ae}isNone(){return this.val===ae}expect(e){if(this.isNone())throw new Error(e);return this.val}unwrap(){if(this.isNone())throw new Error("Unwrap called on None");return this.val}unwrapOr(e){return this.isNone()?e:this.val}unwrapOrElse(e){return this.isNone()?e():this.val}map(e){return this.isSome()?new r(e(this.val)):this}mapOr(e,t){return this.isSome()?t(this.val):e}or(e){return this.isSome()?this:e}okOr(e){return this.isSome()?X(this.val):B(e)}peek(){return this.val}flatten(){return this.val instanceof r?this.val:this}static from(e){let t=e();return t==null?new r(ae):new r(t)}static async fromAsync(e){let t=await e();return t==null?new r(ae):new r(t)}};function Ie(r){return new ce(r)}Object.defineProperty(Ie,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isSome()||!1});function Ce(){return new ce(ae)}Object.defineProperty(Ce,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isNone()||!1});var W=class r{val;constructor(e){this.val=e}get[Symbol.toStringTag](){return"Result"}*[Symbol.iterator](){this.isOk()&&(yield this.val)}isOk(){return!(this.val instanceof Error||this.val&&typeof this.val=="object"&&Error.isPrototypeOf(this.val))}isErr(){return this.val instanceof Error||this.val&&typeof this.val=="object"&&Error.isPrototypeOf(this.val)}formatError(e){throw e.stack=`${e.message}: ${this.val.stack?`
	`+this.val.stack.split(`
`).join(`
	`):this.val.message}`,e}expect(e){return this.isErr()&&this.formatError(new Error(e)),this.val}expectErr(e){return this.isOk()&&this.formatError(new Error(e)),this.val}unwrap(){return this.isErr()&&this.formatError(new Error(`Unwrap called on ${this.val.name}`)),this.val}unwrapErr(){if(this.isOk())throw new Error(`UnwrapError called on value - ${this.val}`);return this.val}unwrapOr(e){return this.isErr()?e:this.val}unwrapOrElse(e){return this.isErr()?e(this.val):this.val}map(e){return this.isOk()?new r(e(this.val)):this}mapErr(e){return this.isOk()?this:new r(e(this.val))}mapOr(e,t){return this.isOk()?t(this.val):e}or(e){return this.isOk()?this:e}ok(){return this.isOk()?Ie(this.val):Ce()}peek(){return this.val}throw(){if(this.isErr())throw this.val}flatten(){return this.val instanceof r?this.val:this}static from(e){try{return new r(e())}catch(t){return new r(t)}}static async fromAsync(e){try{return new r(await e())}catch(t){return new r(t)}}static partition(e){return e.reduce((t,s)=>(s.isOk()?t.ok.push(s.unwrap()):t.err.push(s.unwrapErr()),t),{ok:[],err:[]})}};function X(r){return new W(r)}Object.defineProperty(X,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isOk()||!1});function B(r){return typeof r=="string"?new W(new Error(r)):new W(r)}Object.defineProperty(B,Symbol.hasInstance,{value:r=>typeof r!="object"?!1:r?.isErr()||!1});async function R(r){try{let e=await r;return X(e)}catch(e){return B(e)}}var bs=fe(ie());async function Is(r,e,t,s){if(e==="")return[];let n=await R(C(r,e));if(n.isErr())throw n.unwrapErr();let i=n.unwrap();if(t==="")return i.features[i.latestStable]??[];let o=Zo(i,t);if(o.length===0)return[];if(s&&s.length!==0){let a={};for(let c of s)a[c]=!0;return o.filter(c=>!a[c])}return o}function Zo(r,e){let t=r.features[e]??[];if(t.length===0){for(let s of r.versions)if((0,bs.satisfies)(s,e)){t=r.features[s]??[];break}}return t}var O=fe(ie());function at(r,e){if(e.length===0)return[];let t=[];for(let s of e)t.push(ta(r,s));return t}async function ta(r,e){let t=await C(r.extensionContext,e.name);t[e.inputVersion]||(t=await C(r.extensionContext,e.name,!0));let s={id:e.id,current:e.currentVersion,latest:"",status:"Unkown"};if((0,O.prerelease)(s.current)===null){if(e.currentVersion!==t.latestStable){if(s.status="Outdated",s.latest=t.latestStable,(0,O.major)(s.current)===(0,O.major)(t.latestStable))return{ctx:r,decoration:s};for(let n of t.versions)if((0,O.satisfies)(n,s.current))return s.currentMax=n,{ctx:r,decoration:s}}return s.status="Latest",s.latest=t.latestStable,{ctx:r,decoration:s}}if(e.currentVersion!==t.latestPrerelease){if(s.status="Outdated",s.latest=t.latestPrerelease,(0,O.satisfies)(t.latestPrerelease,s.current))return{ctx:r,decoration:s};for(let n of t.versions)if((0,O.satisfies)(n,s.current))return s.currentMax=n,{ctx:r,decoration:s};return{ctx:r,decoration:s}}return s.status="Latest",s.latest=t.latestPrerelease,{ctx:r,decoration:s}}async function Cs(r){return ot(r)}var U=fe(ie()),Oe=require("vscode");async function ct(r,e){if(e.length===0)return[];let t=[];for await(let s of e){let n=await C(r.extensionContext,s.name,!0),i,o=(0,U.minVersion)(s.inputVersion);if((0,U.gt)(o,n.latestStable)&&n.latestPrerelease&&(0,U.gt)(o,n.latestPrerelease))t.push({ctx:r,diagnostic:{id:s.id,type:"Version",severity:Oe.DiagnosticSeverity.Error,source:"extension/crates-cmp",message:"Version not found, latest stable is "+n.latestStable}});else{for(let a of n.versions)if((0,U.satisfies)(a,s.inputVersion)){i=a;break}i||t.push({ctx:r,diagnostic:{id:s.id,type:"Version",severity:Oe.DiagnosticSeverity.Error,source:"extension/crates-cmp",message:"Version not found, latest stable is "+n.latestStable}})}if(i&&s.features.length!==0)for(let a of s.features)n.features[i].includes(a)||t.push({ctx:r,diagnostic:{id:s.id,type:"Feature",severity:Oe.DiagnosticSeverity.Error,source:"extension/crates-cmp",message:`Feature "${a}" not found, available features are `+n.features[i].join(", ")}})}return t}var P=require("vscode");async function lt(r,e,t){let s=await R(Ss(r,e));if(s.isErr())return P.window.showErrorMessage(s.unwrapErr().message),[];let n=s.unwrap().map((i,o)=>{let a=new P.CompletionItem(j(i),P.CompletionItemKind.Constant);return a.insertText=j(i),a.sortText=F(o++),a.preselect=o===0,a.range=t,a});return new P.CompletionList(n)}var q=require("vscode");async function Os(r,e,t,s,n){let i=await R(Is(r,e,t,s));if(i.isErr())return q.window.showErrorMessage(i.unwrapErr().message),[];let o=i.unwrap().map((a,c)=>{let l=new q.CompletionItem(j(a),q.CompletionItemKind.Constant);return l.insertText=j(a),l.sortText=F(c++),l.preselect=c===0,l.range=n,l});return new q.CompletionList(o)}var $=require("vscode");async function $s(r,e){let t=sa(r,e),s=await R(Cs(t));if(s.isErr())return $.window.showErrorMessage(s.unwrapErr().message),[];let[n,i]=na(t);return s.unwrap().map((a,c)=>{let l=new $.CompletionItem(a.name,$.CompletionItemKind.Constant);return l.insertText=a.name,l.documentation=a.description,l.detail="max version: "+a.max_version,l.sortText=F(c++),l.preselect=c===0,l.range=new $.Range(e.line,n,e.line,i),l})}function sa(r,e){let t=new $.Range(e.line,0,e.line,e.character);return r.getText(t)}function na(r){let e=-1,t=-1;for(let s=0;s<r.length;s++)r[s].trim()!==""&&(e===-1&&(e=s),t=s);return[e,t]}var Ls=require("vscode");function As(r,e){return new Promise((t,s)=>{Ls.commands.executeCommand(r,e).then(n=>{Nt(n)&&s("symbol provider unavailable"),t(n)},n=>s(n))})}var ks=require("vscode");var Ps=require("vscode");function L(r){return r&&new Ps.Range(r.start.translate(0,1),r.end.translate(0,-1))}function qs(r){return new Promise(e=>setTimeout(e,r))}var ut=class{enterTable(e,t){return!0}enterDependencies(e,t){return!0}onPackage(e,t){}onDependencies(e,t,s,n){}onFeatures(e,t){}onWorkspace(e,t){}onLib(e,t){}onBin(e,t){}onProfile(e,t){}onBadges(e,t){}onOther(e,t){}tree;constructor(e){this.tree=e}walk(){for(let e of this.tree)switch(e.name){case"package":this.enterTable(e,"package")&&this.onPackage(e.name,e);break;case"dependencies":this.enterDependencies(e,"dependencies")&&this.onDependencies(e.name,e,"dependencies");break;case"dev-dependencies":this.enterDependencies(e,"dev-dependencies")&&this.onDependencies(e.name,e,"dev-dependencies");break;case"build-dependencies":this.enterDependencies(e,"build-dependencies")&&this.onDependencies(e.name,e,"build-dependencies");break;case"target":if(this.enterDependencies(e,"dependencies"))for(let t of e.children)for(let s of t.children)this.onDependencies(le(e.name,t.name,s.name),s,"dependencies",t.name);case"features":this.enterTable(e,"features")&&this.onFeatures(e.name,e);break;case"workspace":this.enterTable(e,"workspace")&&this.onWorkspace(e.name,e);break;case"lib":this.enterTable(e,"lib")&&this.onLib(e.name,e);break;case"bin":this.enterTable(e,"bin")&&this.onBin(e.name,e);break;case"profile":this.enterTable(e,"profile")&&this.onProfile(e.name,e);break;case"badges":this.enterTable(e,"badges")&&this.onBadges(e.name,e);break;default:this.enterTable(e,"other")&&this.onOther(e.name,e);break}}},ue=class extends ut{enterCrate(e){return!0}onCrate(e,t,s,n){}onDependencies(e,t,s,n){for(let i of t.children)this.enterCrate(i)&&this.onCrate(le(e,i.name),i,s,n)}};async function Le(r){for(let e=0;e<5;e++){let t=await R(As("vscode.executeDocumentSymbolProvider",r));if(console.log("waiting for Even better toml"),t.isOk())return t.unwrap();await qs(500)}return ks.window.showErrorMessage("Require `Even Better TOML` extension"),[]}var $e=class extends ue{identifiers=[];doc;docTree;constructor(e,t,s){super(e),this.doc=t,this.docTree=s}enterTable(e,t){return!1}enterDependencies(e,t){return!0}enterCrate(e){return!0}onCrate(e,t,s,n){let i=t.name,o={id:e,name:i,inputVersion:"",features:[],tableName:s,platform:n},a=this.doc.getText(t.range).replace(/(\r\n|\r|\n)/g,">");if(this.docTree.visitDependency(o.id,a,t.range),this.docTree.visitNode(o.id,{range:t.range,value:a}),t.children.length===0){let c=this.doc.getText(L(t.range));o.inputVersion=c,this.docTree.addDependency(o);return}for(let c of t.children){if(c.name==="version"){let l=this.doc.getText(L(c.range));o.inputVersion=l,this.docTree.visitNode(le(o.id,c.name),{value:l,range:c.range});continue}if(c.name==="features"){if(c.children.length!==0)for(let l of c.children){let h=this.doc.getText(L(l.range));this.docTree.visitNode(le(o.id,c.name,l.name),{value:h,range:l.range}),o.features.push(h)}else{let l=this.doc.getText(L(c.range));this.docTree.visitNode(le(o.id,c.name),{value:l,range:c.range}),o.features.push(l)}continue}c.name==="package"&&(o.packageName=this.doc.getText(L(c.range)))}this.docTree.addDependency(o)}};function le(...r){return r.join(".")}var Ae=class{context;constructor(e){this.context=e}provideCompletionItems(e,t,s,n){return new Promise(async i=>{let o=await this.completionItems(e,t,s,n);i(o)})}async completionItems(e,t,s,n){let i=await Le(e.uri);if(i.length===0)return[];let o=new dt(i,t);if(o.walk(),!o.crateName)return await $s(e,t);if(o.versionNode&&o.versionNode.range.contains(t))return await lt(this.context,o.crateName,o.versionNode.range);if(o.featuresNode&&o.featuresNode.children.length!==0){if(o.featuresNode.range.contains(t)){let a=e.getText(L(o.versionNode?.range)),c,l=[];for(let h of o.featuresNode.children){if(h.range.contains(t)){c=h.range;continue}l.push(e.getText(L(h.range)))}return await Os(this.context,o.crateName,a,l,c)}return[]}return o.isComplexDependencyBlock?[]:await lt(this.context,o.crateName,o.crateRange)}},dt=class extends ue{isComplexDependencyBlock=!1;crateName;crateRange;versionNode;featuresNode;position;constructor(e,t){super(e),this.position=t}enterTable(e,t){return!1}enterDependencies(e,t){return!!e.range.contains(this.position)}enterCrate(e){return!!e.range.contains(this.position)}onCrate(e,t){if(this.crateName=t.name,this.crateRange=t.range,t.children.length!==0){this.isComplexDependencyBlock=!0;for(let s of t.children){if(s.name==="version"){this.versionNode=s;continue}if(s.name==="features"){this.featuresNode=s;continue}}}this.enterCrate=s=>!1}};var Gs=require("vscode");var b=require("vscode");var A=require("vscode"),pt=class{path;state;constructor(){this.state={}}init(e){if(this.path!==e){this.state={},this.path=e;return}}reset(){this.state={},this.path=void 0}delete(e){this.state[e]&&(this.state[e].decoration.dispose(),delete this.state[e])}get(e){return this.state[e]}set(e,t){this.state[e]=t}decorateDependency(e,t,s){if(s===void 0){let o=this.get(e);o&&A.window.activeTextEditor?.setDecorations(o.decoration,[t]);return}let n=this.get(e);n&&n.decoration.dispose();let i;switch(s.status){case"Latest":i=oa(s.latest);break;case"Outdated":i=aa(s);break;case"Loading":i=ca();break;case"Not Installed":i=la();break}this.set(e,{latest:s.latest,status:s.status,decoration:i}),A.window.activeTextEditor?.setDecorations(i,[t])}setLoading(e,t){t!==void 0&&this.decorateDependency(e,t,{id:e,latest:"",status:"Loading"})}setNotInstalled(e,t){t!==void 0&&this.decorateDependency(e,t,{id:e,latest:"",status:"Not Installed"})}},_s=new pt;function oa(r){return A.window.createTextEditorDecorationType({after:{contentText:"\u2705 "+r,color:"green",margin:"0 0 0 4em"}})}function aa(r){return r.currentMax!==""&&r.current===r.currentMax?A.window.createTextEditorDecorationType({after:{contentText:"\u{1F512} "+r.current+", "+r.latest,color:"orange",margin:"0 0 0 4em"}}):r.currentMax&&r.current!==r.currentMax?A.window.createTextEditorDecorationType({after:{contentText:"\u2B06\uFE0F "+r.current+"==>"+r.currentMax+", "+r.latest,color:"yellow",margin:"0 0 0 4em"}}):A.window.createTextEditorDecorationType({after:{contentText:"\u2B06\uFE0F "+r.current+"==>"+r.latest,color:"yellow",margin:"0 0 0 4em"}})}function ca(){return A.window.createTextEditorDecorationType({after:{contentText:"Waiting...",color:"grey",margin:"0 0 0 4em"}})}function la(){return A.window.createTextEditorDecorationType({after:{contentText:"Not Installed",color:"grey",margin:"0 0 0 4em"}})}var de=require("vscode"),ft=class{collection;state=new Map;constructor(){this.collection=de.languages.createDiagnosticCollection("crates-cmp")}add(e,t,s){let n=this.state.get(e);if(n){n.set(s.id,new de.Diagnostic(t,s.message,s.severity));return}let i=new Map;i.set(s.id,new de.Diagnostic(t,s.message,s.severity)),this.state.set(e,i)}delete(e,t){let s=this.state.get(e.path);s&&s.delete(t)&&this.collection.set(e,Array.from(s.values()))}render(e){let t=this.state.get(e.path);t&&this.collection.set(e,Array.from(t.values()))}clear(e){this.state[e.path]&&(this.state[e.path].length=0)}},Us=new ft;var ht=class{path="";nodes=new Map;notVisitedNode=new Set;dependencyNodes={};added=new Set;valueUpdated=new Set;rangeUpdated=new Set;dependencyIds=[];deleted=new Set;isEmpty(){return this.nodes.size===0}reset(){this.path="",this.nodes.clear(),this.notVisitedNode.clear(),this.dependencyNodes={},this.added.clear(),this.valueUpdated.clear(),this.rangeUpdated.clear(),this.dependencyIds.length=0,this.deleted.clear()}init(e){if(this.dependencyNodes={},this.path!==e){this.nodes.clear(),this.path=e,this.added.clear(),this.valueUpdated.clear(),this.rangeUpdated.clear(),this.deleted.clear(),this.dependencyIds.length=0;return}this.added.clear(),this.valueUpdated.clear(),this.rangeUpdated.clear(),this.deleted.clear();for(let t of this.nodes.keys())this.notVisitedNode.add(t);for(let t of this.dependencyIds)this.deleted.add(t);this.dependencyIds.length=0}visitDependency(e,t,s){this.dependencyIds.push(e),this.deleted.delete(e);let n=this.nodes.get(e);n?(n.value!==t&&this.valueUpdated.add(e),n.range.isEqual(s)||this.rangeUpdated.add(e)):this.added.add(e),this.nodes.set(e,{value:t,range:s})}addDependency(e){this.dependencyNodes[e.id]=e}visitNode(e,t){this.notVisitedNode.delete(e),this.nodes.set(e,t)}finalize(){for(let e of this.notVisitedNode)this.nodes.delete(e);return this.dependencyNodes}deletedIds(){return Array.from(this.deleted)}dirtyIds(){return[...this.added,...this.valueUpdated]}isClean(){return this.dirtyIds().length===0}rangeUpdatedIds(){return Array.from(this.rangeUpdated)}node(e){return this.nodes.get(e)}range(e){let t=this.nodes.get(e);return t?t.range:void 0}getAllChanges(){return{added:Array.from(this.added),valueUpdated:Array.from(this.valueUpdated),rangeUpdated:Array.from(this.rangeUpdated),deleted:Array.from(this.deleted)}}},js=new ht;var mt=class{path=void 0;dependencies=new Map;dirtyNodes=new Map;notFoundNodes=new Set;isEmpty(){return this.dependencies.size===0}checkAndDelDirty(e,t){return this.dirtyNodes.has(e)&&this.dirtyNodes.get(e)<=t?(this.dirtyNodes.delete(e),!0):!1}reset(){this.dependencies.clear(),this.dirtyNodes.clear(),this.notFoundNodes.clear()}init(e,t){e!==this.path&&(this.dependencies.clear(),this.dirtyNodes.clear(),this.notFoundNodes.clear())}getDependencies(){return this.dependencies}populateUserInput(e,t,s){for(let n of[...s.added,...s.valueUpdated]){let i=t[n];i&&(this.dependencies.set(n,{...i}),this.dirtyNodes.set(n,e))}for(let n of s.deleted)this.dependencies.delete(n)}populateCurrent(e,t){for(let n of this.dirtyNodes.keys()){if(!this.dirtyNodes.get(n))continue;let i=this.dependencies.get(n),o=i.packageName??i.name,a=t[i.tableName][o]??void 0;if(!a){this.notFoundNodes.add(n);continue}this.dependencies.set(n,{...i,currentVersion:a.version})}let s=new Map;if(t.duplicated.size!==0)for(let[n,i]of this.dependencies.entries()){let o=i.packageName??i.name;t.duplicated.has(o)&&s.set(n,t.duplicated.get(o))}return s}populateCurrentWithoutDoc(e,t){for(let n of this.dependencies.values()){let i=n.packageName??n.name;t[n.tableName][i]&&n.currentVersion!==t[n.tableName][i].version&&(this.dependencies.set(n.id,{...n,currentVersion:t[n.tableName][i].version}),this.dirtyNodes.set(n.id,e))}let s=new Map;if(t.duplicated.size!==0)for(let[n,i]of this.dependencies.entries()){let o=i.packageName??i.name;t.duplicated.has(o)&&s.set(n,t.duplicated.get(o))}return s}dirtyIds(){return Array.from(this.dirtyNodes.keys())}isClean(){return this.dirtyNodes.size===0}notFoundIds(){return Array.from(this.notFoundNodes)}dirtyDeps(e=0){let t=[];for(let[s,n]of this.dirtyNodes.entries()){if(n>e)return[];let i=this.dependencies.get(s);t.push(i)}return t}},Fs=new mt;async function Et(r){let e=await vt(`cargo tree --manifest-path ${r} --depth 1 --all-features`).catch(t=>{throw t});return ua(e)}function ua(r){let e=r.split(`
`),t={dependencies:{},"build-dependencies":{},"dev-dependencies":{},duplicated:new Map},s="dependencies";function n(a){let c=a.trim();c==="[build-dependencies]"?s="build-dependencies":c==="[dev-dependencies]"&&(s="dev-dependencies")}function i(a){let c=!1,l=!1,h,d=a.trim().split(/\s+/);if(d.length<3)return null;let m=d[1],u=d[2].startsWith("v")?d[2].substring(1):d[2];for(let T of d.slice(3))T==="(*)"?c=!0:T==="(proc-macro)"?l=!0:T.startsWith("(")&&T.endsWith(")")&&(h=T.slice(1,-1));return{name:m,version:u,path:h,procMacro:l,deduplicated:c}}let o=new Map;e.forEach(a=>{if(n(a),s&&(a.trim().startsWith("\u251C\u2500\u2500")||a.trim().startsWith("\u2514\u2500\u2500"))){let c=i(a);c&&(t[s][c.name]=c,o.has(c.name)?o.get(c.name).add(c.version):o.set(c.name,new Set([c.version])))}});for(let[a,c]of o)c.size>1&&t.duplicated.set(a,Array.from(c));return t}var gt=class{docTree=js;depTree=Fs;decorations=_s;diagnostic=Us;path;version=0;rev=0;reset(){this.path=void 0,this.docTree.reset(),this.depTree.reset(),this.decorations.reset()}init(e){this.path!==e.uri.path&&(this.rev=0),this.path=e.uri.path,this.docTree.init(this.path),this.decorations.init(this.path),this.version=e.version}async parseDocument(e,t){let s=await Le(t.uri);if(this.noResumeDocTree())return;let n={extensionContext:e,path:this.path,rev:this.incRev(),uri:t.uri};new $e(s,t,this.docTree).walk();let o=this.docTree.finalize();if(this.docTree.isEmpty())return;for(let m of this.docTree.dirtyIds())this.decorations.setLoading(m,this.docTree.range(m)),this.diagnostic.delete(n.uri,m);for(let m of this.docTree.deletedIds())this.decorations.delete(m),this.diagnostic.delete(n.uri,m);for(let m of this.docTree.rangeUpdatedIds())this.decorations.decorateDependency(m,this.docTree.range(m));if(this.docTree.isClean())return;this.depTree.populateUserInput(n.rev,o,this.docTree.getAllChanges());let a=await R(Et(n.path));if(this.noResumeDepTree())return;if(a.isErr()){let m=this.depTree.dirtyDeps(this.rev);if(m.length===0)return;let u=await ct(n,m);if(u.length===0)return;u.filter(T=>this.depTree.checkAndDelDirty(T.diagnostic.id,T.ctx.rev)).forEach(T=>{this.decorations.delete(T.diagnostic.id),this.diagnostic.add(T.ctx.path,this.docTree.range(T.diagnostic.id),T.diagnostic)}),this.diagnostic.render(n.uri);return}let c=a.unwrap(),l=this.depTree.populateCurrent(n.rev,c);if(l.size!==0){for(let[m,u]of l)this.diagnostic.add(n.path,this.docTree.range(m),{id:m,type:"Crate",severity:b.DiagnosticSeverity.Information,message:`Found multiple versions: ${u.join(", ")}`,source:"crates-cmp"});this.diagnostic.render(n.uri)}for(let m of this.depTree.notFoundIds())this.depTree.checkAndDelDirty(m,n.rev)&&this.decorations.setNotInstalled(m,this.docTree.range(m));let h=this.depTree.dirtyDeps(this.rev);if(h.length===0)return;at(n,h).forEach(m=>m.then(this.outputPromiseHandler.bind(this)))}async parseDependencies(e,t){if(!this.depTree.isClean())return;let s={extensionContext:e,path:this.path,rev:this.incRev(),uri:t.uri},n=await R(Et(s.path));if(this.noResumeDepTree())return;if(n.isErr()){let l=this.depTree.dirtyDeps(this.rev);if(l.length===0)return;let h=await ct(s,l);if(h.length===0)return;h.filter(d=>this.depTree.checkAndDelDirty(d.diagnostic.id,d.ctx.rev)).forEach(d=>{this.decorations.delete(d.diagnostic.id),this.diagnostic.add(d.ctx.path,this.docTree.range(d.diagnostic.id),d.diagnostic)}),this.diagnostic.render(s.uri);return}let i=n.unwrap();for(let l of this.docTree.dirtyIds())this.decorations.setLoading(l,this.docTree.range(l)),this.diagnostic.delete(s.uri,l);let o=this.depTree.populateCurrentWithoutDoc(s.rev,i);if(o.size!==0){for(let[l,h]of o)this.diagnostic.add(s.path,this.docTree.range(l),{id:l,type:"Crate",severity:b.DiagnosticSeverity.Information,message:`Found multiple versions: ${h.join(", ")}`,source:"crates-cmp"});this.diagnostic.render(s.uri)}for(let l of this.depTree.notFoundIds())this.depTree.checkAndDelDirty(l,s.rev)&&this.decorations.setNotInstalled(l,this.docTree.range(l));let a=this.depTree.dirtyDeps(this.rev);if(a.length===0)return;at(s,a).forEach(l=>l.then(this.outputPromiseHandler.bind(this)))}outputPromiseHandler(e){this.depTree.checkAndDelDirty(e.decoration.id,e.ctx.rev)&&this.decorations.decorateDependency(e.decoration.id,this.docTree.range(e.decoration.id),e.decoration)}incRev(){return this.rev=this.rev+1,this.rev}noResumeDocTree(){if(!b.window.activeTextEditor||(b.window.activeTextEditor.document.fileName.endsWith("Cargo.toml"),b.window.activeTextEditor.document.uri.path!==this.path)||b.window.activeTextEditor.document.version<this.version)return!0}noResumeDepTree(){if(!b.window.activeTextEditor||(b.window.activeTextEditor.document.fileName.endsWith("Cargo.toml"),b.window.activeTextEditor.document.uri.path!==this.path)||this.depTree.isEmpty())return!0}},Vs=new gt;var Pe=class{ctx;state=Vs;constructor(e){this.ctx=e}async onDidSaveTextDocument(e){e.fileName.endsWith("Cargo.toml")&&(this.state.init(e),await this.state.parseDocument(this.ctx,e))}async onDidChangeActiveEditor(e){if(e){if(!e.document.fileName.endsWith("Cargo.toml")){this.state.reset();return}this.state.init(e.document),await this.state.parseDocument(this.ctx,e.document)}}async onDidLockFileChange(){this.state.noResumeDepTree()||await this.state.parseDependencies(this.ctx,Gs.window.activeTextEditor.document)}onDidCloseTextDocument(e){e.fileName.endsWith("Cargo.toml")&&e.uri.path===this.state.path&&this.state.reset()}};var Ms=require("vscode"),yt=class{client=void 0;dependencies={};async init(){let e=Ms.extensions.getExtension("rust-lang.rust-analyzer");if(!e)throw new Error("Require Rust Analyzer");let t=await e.activate();if(!t.client)throw new Error("Require Rust Analyzer");t.client.start(),this.client=t.client}stop(){if(this.client)return this.client.stop()}async dependencyList(){let e=await this.client?.sendRequest("rust-analyzer/fetchDependencyList",{});for(let t of e.crates)this.dependencies[t.name]=t}dependency(e){return this.dependencies[e]}languageClient(){return this.client}},Xs=new yt;async function da(r){let e={language:"toml",pattern:"**/Cargo.toml"},t=new Pe(r);r.subscriptions.push(k.window.onDidChangeActiveTextEditor(t.onDidChangeActiveEditor,t),k.workspace.onDidSaveTextDocument(t.onDidSaveTextDocument,t),k.workspace.onDidCloseTextDocument(t.onDidCloseTextDocument,t),k.workspace.createFileSystemWatcher("**/Cargo.lock").onDidChange(t.onDidLockFileChange,t),k.languages.registerCompletionItemProvider(e,new Ae(r),'"',".","+","-","0","1","2","3","4","5","6","7","8","9"))}function pa(){return Xs.stop()}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

ky/distribution/index.js:
  (*! MIT License  Sindre Sorhus *)
*/
